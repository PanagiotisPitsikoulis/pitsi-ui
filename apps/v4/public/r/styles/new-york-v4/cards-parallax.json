{
  "$schema": "https://ui.pitsi.com/schema/registry-item.json",
  "name": "cards-parallax",
  "type": "registry:ui",
  "description": "Animation component: cards parallax",
  "files": [
    {
      "path": "registry/new-york-v4/animations/cards-parallax/cards-parallax.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { memo, useMemo, useRef } from \"react\"\nimport { motion, useScroll, useTransform, type MotionValue } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport type CardsParallaxProps = {\n  /** Array of card items to display */\n  children: ReactNode[]\n  /** Additional CSS classes */\n  className?: string\n  /** Scale reduction per card. Default: 0.05 */\n  scaleStep?: number\n  /** Opacity reduction per card. Default: 0.5 */\n  minOpacity?: number\n  /** Vertical offset per card in pixels. Default: 25 */\n  cardOffset?: number\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Stacking cards with parallax effect that scale and translate on scroll.\n * Creates a deck of cards that stack on top of each other with smooth transitions.\n */\nexport const CardsParallax = memo<CardsParallaxProps>(\n  ({\n    children,\n    className,\n    scaleStep = 0.05,\n    minOpacity = 0.5,\n    cardOffset = 25,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const containerRef = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const adjustedCardOffset = useMemo(\n      () => (isMobile ? cardOffset * 0.6 : cardOffset),\n      [isMobile, cardOffset]\n    )\n\n    const adjustedScaleStep = useMemo(\n      () => (isMobile ? scaleStep * 0.6 : scaleStep),\n      [isMobile, scaleStep]\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? containerRef : undefined,\n      offset: [\"start start\", \"end end\"],\n    })\n\n    const childrenArray = Array.isArray(children) ? children : [children]\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"space-y-8\", className)}>\n          {childrenArray.map((child, index) => (\n            <div key={index}>{child}</div>\n          ))}\n        </div>\n      )\n    }\n\n    return (\n      <div ref={containerRef} className={cn(\"relative\", className)}>\n        {childrenArray.map((child, index) => {\n          const targetScale =\n            1 - (childrenArray.length - index) * adjustedScaleStep\n          const range = [index * 0.25, 1]\n\n          return (\n            <CardItem\n              key={index}\n              index={index}\n              progress={scrollYProgress}\n              range={range}\n              targetScale={targetScale}\n              minOpacity={minOpacity}\n              cardOffset={adjustedCardOffset}\n            >\n              {child}\n            </CardItem>\n          )\n        })}\n      </div>\n    )\n  }\n)\n\nCardsParallax.displayName = \"CardsParallax\"\n\ntype CardItemProps = {\n  children: ReactNode\n  index: number\n  progress: MotionValue<number>\n  range: number[]\n  targetScale: number\n  minOpacity: number\n  cardOffset: number\n}\n\nconst CardItem = memo<CardItemProps>(\n  ({\n    children,\n    index,\n    progress,\n    range,\n    targetScale,\n    minOpacity,\n    cardOffset,\n  }) => {\n    const scale = useTransform(progress, range, [1, targetScale])\n    const opacity = useTransform(progress, range, [1, minOpacity])\n\n    return (\n      <motion.div\n        style={{\n          scale,\n          opacity,\n          top: `calc(${index * cardOffset}px)`,\n        }}\n        className=\"sticky top-0 flex min-h-screen items-center justify-center px-4\"\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nCardItem.displayName = \"CardItem\"\n\nexport default CardsParallax\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}