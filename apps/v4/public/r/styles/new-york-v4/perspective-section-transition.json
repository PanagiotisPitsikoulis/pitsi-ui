{
  "$schema": "https://ui.pitsi.com/schema/registry-item.json",
  "name": "perspective-section-transition",
  "type": "registry:ui",
  "description": "Animation component: perspective section transition",
  "files": [
    {
      "path": "registry/new-york-v4/animations/perspective-section-transition/perspective-section-transition.tsx",
      "content": "\"use client\"\n\nimport type { CSSProperties, ReactNode } from \"react\"\nimport { memo, useMemo, useRef } from \"react\"\nimport { motion, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport type PerspectiveSectionProps = {\n  /** Section content */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Perspective value in pixels. Default: 1000 */\n  perspective?: number\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Section with 3D perspective transform on scroll.\n * Creates a card-flip/rotate effect as you scroll through the section.\n * Perfect for creating immersive, depth-based transitions.\n */\nexport const PerspectiveSection = memo<PerspectiveSectionProps>(\n  ({\n    children,\n    className,\n    perspective = 1000,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start end\", \"end start\"],\n    })\n\n    const adjustedPerspective = useMemo(\n      () => (isMobile ? perspective * 1.5 : perspective),\n      [isMobile, perspective]\n    )\n\n    // Rotate on X axis for flip effect\n    const rotateX = useTransform(scrollYProgress, [0, 0.5, 1], [45, 0, -45])\n\n    // Fade in and out\n    const opacity = useTransform(\n      scrollYProgress,\n      [0, 0.3, 0.7, 1],\n      [0, 1, 1, 0]\n    )\n\n    // Scale up as it comes into view\n    const scale = useTransform(scrollYProgress, [0, 0.5, 1], [0.8, 1, 0.8])\n\n    const containerStyle: CSSProperties = useMemo(\n      () => ({\n        perspective: `${adjustedPerspective}px`,\n      }),\n      [adjustedPerspective]\n    )\n\n    if (shouldDisableAnimation) {\n      return (\n        <div\n          className={cn(\n            \"relative flex min-h-screen items-center justify-center\",\n            className\n          )}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative flex min-h-screen items-center justify-center\",\n          className\n        )}\n        style={containerStyle}\n      >\n        <motion.div\n          style={{\n            rotateX,\n            opacity,\n            scale,\n          }}\n          className=\"w-full will-change-transform\"\n        >\n          {children}\n        </motion.div>\n      </div>\n    )\n  }\n)\n\nPerspectiveSection.displayName = \"PerspectiveSection\"\n\nexport type RotatingCardSectionProps = {\n  /** Content for the front of the card */\n  frontContent: ReactNode\n  /** Content for the back of the card */\n  backContent: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Perspective value in pixels. Default: 1500 */\n  perspective?: number\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: true (recommended for performance) */\n  noMobile?: boolean\n}\n\n/**\n * Section that rotates like a card flip on scroll.\n * Shows front content, then flips to reveal back content.\n * Creates a dramatic reveal effect for contrasting content.\n */\nexport const RotatingCardSection = memo<RotatingCardSectionProps>(\n  ({\n    frontContent,\n    backContent,\n    className,\n    perspective = 1500,\n    scrollBased = true,\n    noMobile = true, // Disabled by default on mobile for performance\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start end\", \"end start\"],\n    })\n\n    const adjustedPerspective = useMemo(\n      () => (isMobile ? perspective * 1.2 : perspective),\n      [isMobile, perspective]\n    )\n\n    const rotateY = useTransform(scrollYProgress, [0, 1], [0, 180])\n    const frontOpacity = useTransform(scrollYProgress, [0, 0.5, 1], [1, 0, 0])\n    const backOpacity = useTransform(scrollYProgress, [0, 0.5, 1], [0, 0, 1])\n\n    const containerStyle: CSSProperties = useMemo(\n      () => ({\n        perspective: `${adjustedPerspective}px`,\n      }),\n      [adjustedPerspective]\n    )\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"relative min-h-screen\", className)}>\n          <div className=\"flex min-h-screen items-center justify-center p-4\">\n            <div className=\"w-full max-w-4xl space-y-8\">\n              <div className=\"rounded-3xl bg-gradient-to-br from-blue-600 to-purple-600 p-12 shadow-2xl\">\n                {frontContent}\n              </div>\n              <div className=\"rounded-3xl bg-gradient-to-br from-pink-600 to-orange-600 p-12 shadow-2xl\">\n                {backContent}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\"relative min-h-screen\", className)}\n        style={containerStyle}\n      >\n        <div className=\"sticky top-0 flex min-h-screen items-center justify-center p-4\">\n          <motion.div\n            style={{ rotateY }}\n            className=\"relative h-[600px] w-full max-w-4xl will-change-transform\"\n          >\n            {/* Front face */}\n            <motion.div\n              style={{ opacity: frontOpacity }}\n              className=\"absolute inset-0 rounded-3xl bg-gradient-to-br from-blue-600 to-purple-600 p-12 shadow-2xl\"\n            >\n              {frontContent}\n            </motion.div>\n\n            {/* Back face */}\n            <motion.div\n              style={{ opacity: backOpacity, rotateY: 180 }}\n              className=\"absolute inset-0 rounded-3xl bg-gradient-to-br from-pink-600 to-orange-600 p-12 shadow-2xl\"\n            >\n              {backContent}\n            </motion.div>\n          </motion.div>\n        </div>\n      </div>\n    )\n  }\n)\n\nRotatingCardSection.displayName = \"RotatingCardSection\"\n\nexport default PerspectiveSection\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}