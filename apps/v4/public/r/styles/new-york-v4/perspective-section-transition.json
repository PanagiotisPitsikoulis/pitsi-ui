{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "perspective-section-transition",
  "type": "registry:ui",
  "description": "Section with 3D perspective transform on scroll.",
  "dependencies": [
    "motion"
  ],
  "registryDependencies": [
    "utils",
    "use-animation-state",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/animations/perspective-section-transition/perspective-section-transition.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { createContext, memo, useContext, useMemo, useRef } from \"react\"\nimport { motion, MotionValue, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\n\n// Context to share scroll progress between container and sections\nconst ScrollProgressContext = createContext<MotionValue<number> | null>(null)\n\nexport type PerspectiveContainerProps = {\n  /** Child sections */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Height of the scroll container. Default: \"200vh\" */\n  height?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Container for perspective section transitions.\n * Provides scroll progress to child PerspectiveSection components.\n */\nexport const PerspectiveContainer = memo<PerspectiveContainerProps>(\n  ({\n    children,\n    className,\n    height = \"200vh\",\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldUseScroll } = useAnimationState(scrollBased, noMobile)\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start start\", \"end end\"],\n    })\n\n    return (\n      <ScrollProgressContext.Provider value={scrollYProgress}>\n        <main\n          ref={ref}\n          className={cn(\"relative\", className)}\n          style={{ height }}\n        >\n          {children}\n        </main>\n      </ScrollProgressContext.Provider>\n    )\n  }\n)\n\nPerspectiveContainer.displayName = \"PerspectiveContainer\"\n\nexport type PerspectiveSectionProps = {\n  /** Section content */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Scale range [start, end]. Default: [1, 0.8] */\n  scaleRange?: [number, number]\n  /** Rotate range in degrees [start, end]. Default: [0, -5] */\n  rotateRange?: [number, number]\n  /** Whether section is sticky. Default: false */\n  sticky?: boolean\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Section that transforms (scale/rotate) based on scroll progress.\n * Use inside PerspectiveContainer for shared scroll tracking.\n */\nexport const PerspectiveSection = memo<PerspectiveSectionProps>(\n  ({\n    children,\n    className,\n    scaleRange = [1, 0.8],\n    rotateRange = [0, -5],\n    sticky = false,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const scrollYProgress = useContext(ScrollProgressContext)\n    const { shouldDisableAnimation } = useAnimationState(scrollBased, noMobile)\n\n    const scale = useTransform(\n      scrollYProgress || new MotionValue(0),\n      [0, 1],\n      scaleRange\n    )\n    const rotate = useTransform(\n      scrollYProgress || new MotionValue(0),\n      [0, 1],\n      rotateRange\n    )\n\n    if (shouldDisableAnimation || !scrollYProgress) {\n      return (\n        <div\n          className={cn(\n            \"flex h-screen flex-col items-center justify-center\",\n            sticky && \"sticky top-0\",\n            className\n          )}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <motion.div\n        style={{ scale, rotate }}\n        className={cn(\n          \"flex h-screen flex-col items-center justify-center\",\n          sticky && \"sticky top-0\",\n          className\n        )}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nPerspectiveSection.displayName = \"PerspectiveSection\"\n\n// Legacy exports for backwards compatibility\nexport { PerspectiveContainer as RotatingCardSection }\n\nexport default PerspectiveSection\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}