{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "flowing-menu",
  "type": "registry:ui",
  "description": "Menu with flowing hover animation effects.",
  "dependencies": [
    "gsap"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/new-york-v4/animations/flowing-menu/flowing-menu.tsx",
      "content": "\"use client\"\n\nimport React, { useEffect, useRef, useState } from \"react\"\nimport { gsap } from \"gsap\"\n\ninterface MenuItemData {\n  link: string\n  text: string\n  image: string\n}\n\ninterface FlowingMenuProps {\n  items?: MenuItemData[]\n  speed?: number\n  textColor?: string\n  bgColor?: string\n  marqueeBgColor?: string\n  marqueeTextColor?: string\n  borderColor?: string\n}\n\ninterface MenuItemProps extends MenuItemData {\n  speed: number\n  textColor: string\n  marqueeBgColor: string\n  marqueeTextColor: string\n  borderColor: string\n  isFirst: boolean\n}\n\nconst FlowingMenu: React.FC<FlowingMenuProps> = ({\n  items = [],\n  speed = 15,\n  textColor = \"hsl(var(--foreground))\",\n  bgColor = \"hsl(var(--background))\",\n  marqueeBgColor = \"hsl(var(--foreground))\",\n  marqueeTextColor = \"hsl(var(--background))\",\n  borderColor = \"hsl(var(--foreground))\",\n}) => {\n  return (\n    <div\n      className=\"h-full w-full overflow-hidden\"\n      style={{ backgroundColor: bgColor }}\n    >\n      <nav className=\"m-0 flex h-full flex-col p-0\">\n        {items.map((item, idx) => (\n          <MenuItem\n            key={idx}\n            {...item}\n            speed={speed}\n            textColor={textColor}\n            marqueeBgColor={marqueeBgColor}\n            marqueeTextColor={marqueeTextColor}\n            borderColor={borderColor}\n            isFirst={idx === 0}\n          />\n        ))}\n      </nav>\n    </div>\n  )\n}\n\nconst MenuItem: React.FC<MenuItemProps> = ({\n  link,\n  text,\n  image,\n  speed,\n  textColor,\n  marqueeBgColor,\n  marqueeTextColor,\n  borderColor,\n  isFirst,\n}) => {\n  const itemRef = useRef<HTMLDivElement>(null)\n  const marqueeRef = useRef<HTMLDivElement>(null)\n  const marqueeInnerRef = useRef<HTMLDivElement>(null)\n  const animationRef = useRef<gsap.core.Tween | null>(null)\n  const [repetitions, setRepetitions] = useState(4)\n\n  const animationDefaults = { duration: 0.6, ease: \"expo\" }\n\n  const findClosestEdge = (\n    mouseX: number,\n    mouseY: number,\n    width: number,\n    height: number\n  ): \"top\" | \"bottom\" => {\n    const topEdgeDist = Math.pow(mouseX - width / 2, 2) + Math.pow(mouseY, 2)\n    const bottomEdgeDist =\n      Math.pow(mouseX - width / 2, 2) + Math.pow(mouseY - height, 2)\n    return topEdgeDist < bottomEdgeDist ? \"top\" : \"bottom\"\n  }\n\n  useEffect(() => {\n    const calculateRepetitions = () => {\n      if (!marqueeInnerRef.current) return\n      const marqueeContent = marqueeInnerRef.current.querySelector(\n        \".marquee-part\"\n      ) as HTMLElement\n      if (!marqueeContent) return\n      const contentWidth = marqueeContent.offsetWidth\n      const viewportWidth = window.innerWidth\n      const needed = Math.ceil(viewportWidth / contentWidth) + 2\n      setRepetitions(Math.max(4, needed))\n    }\n\n    calculateRepetitions()\n    window.addEventListener(\"resize\", calculateRepetitions)\n    return () => window.removeEventListener(\"resize\", calculateRepetitions)\n  }, [text, image])\n\n  useEffect(() => {\n    const setupMarquee = () => {\n      if (!marqueeInnerRef.current) return\n      const marqueeContent = marqueeInnerRef.current.querySelector(\n        \".marquee-part\"\n      ) as HTMLElement\n      if (!marqueeContent) return\n      const contentWidth = marqueeContent.offsetWidth\n      if (contentWidth === 0) return\n\n      if (animationRef.current) {\n        animationRef.current.kill()\n      }\n\n      animationRef.current = gsap.to(marqueeInnerRef.current, {\n        x: -contentWidth,\n        duration: speed,\n        ease: \"none\",\n        repeat: -1,\n      })\n    }\n\n    const timer = setTimeout(setupMarquee, 50)\n    return () => {\n      clearTimeout(timer)\n      if (animationRef.current) {\n        animationRef.current.kill()\n      }\n    }\n  }, [text, image, repetitions, speed])\n\n  const handleMouseEnter = (ev: React.MouseEvent<HTMLAnchorElement>) => {\n    if (!itemRef.current || !marqueeRef.current || !marqueeInnerRef.current)\n      return\n    const rect = itemRef.current.getBoundingClientRect()\n    const edge = findClosestEdge(\n      ev.clientX - rect.left,\n      ev.clientY - rect.top,\n      rect.width,\n      rect.height\n    )\n\n    gsap\n      .timeline({ defaults: animationDefaults })\n      .set(marqueeRef.current, { y: edge === \"top\" ? \"-101%\" : \"101%\" }, 0)\n      .set(marqueeInnerRef.current, { y: edge === \"top\" ? \"101%\" : \"-101%\" }, 0)\n      .to([marqueeRef.current, marqueeInnerRef.current], { y: \"0%\" }, 0)\n  }\n\n  const handleMouseLeave = (ev: React.MouseEvent<HTMLAnchorElement>) => {\n    if (!itemRef.current || !marqueeRef.current || !marqueeInnerRef.current)\n      return\n    const rect = itemRef.current.getBoundingClientRect()\n    const edge = findClosestEdge(\n      ev.clientX - rect.left,\n      ev.clientY - rect.top,\n      rect.width,\n      rect.height\n    )\n\n    gsap\n      .timeline({ defaults: animationDefaults })\n      .to(marqueeRef.current, { y: edge === \"top\" ? \"-101%\" : \"101%\" }, 0)\n      .to(marqueeInnerRef.current, { y: edge === \"top\" ? \"101%\" : \"-101%\" }, 0)\n  }\n\n  return (\n    <div\n      className=\"relative flex-1 overflow-hidden text-center\"\n      ref={itemRef}\n      style={{ borderTop: isFirst ? \"none\" : `1px solid ${borderColor}` }}\n    >\n      <a\n        className=\"relative flex h-full cursor-pointer items-center justify-center text-[4vh] font-semibold uppercase no-underline\"\n        href={link}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        style={{ color: textColor }}\n      >\n        {text}\n      </a>\n      <div\n        className=\"pointer-events-none absolute top-0 left-0 h-full w-full translate-y-[101%] overflow-hidden\"\n        ref={marqueeRef}\n        style={{ backgroundColor: marqueeBgColor }}\n      >\n        <div className=\"flex h-full w-fit\" ref={marqueeInnerRef}>\n          {[...Array(repetitions)].map((_, idx) => (\n            <div\n              className=\"marquee-part flex flex-shrink-0 items-center\"\n              key={idx}\n              style={{ color: marqueeTextColor }}\n            >\n              <span className=\"px-[1vw] text-[4vh] leading-[1] font-normal whitespace-nowrap uppercase\">\n                {text}\n              </span>\n              <div\n                className=\"mx-[2vw] my-[2em] h-[7vh] w-[200px] rounded-[50px] bg-cover bg-center py-[1em]\"\n                style={{ backgroundImage: `url(${image})` }}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FlowingMenu\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}