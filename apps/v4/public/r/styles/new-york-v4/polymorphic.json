{
  "$schema": "https://ui.pitsi.com/schema/registry-item.json",
  "name": "polymorphic",
  "type": "registry:lib",
  "description": "TypeScript utilities for building polymorphic components with the 'as' prop pattern.",
  "devDependencies": [
    "@types/react"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/lib/polymorphic.ts",
      "content": "/**\n * Props type for the \"as\" prop that enables polymorphic components.\n *\n * @template T - The React element type that the component can render as.\n */\ntype AsProp<T extends React.ElementType> = {\n  as?: T\n}\n\n/**\n * Helper type to determine which props should be omitted to avoid conflicts.\n *\n * @template T - The React element type.\n * @template P - The component's own props.\n */\ntype PropsToOmit<T extends React.ElementType, P> = keyof (AsProp<T> & P)\n\n/**\n * Core polymorphic component props without ref.\n *\n * Combines the component's own props with the props of the target element,\n * while properly handling prop conflicts and children.\n *\n * @template T - The React element type to render as.\n * @template Props - The component's own props.\n */\ntype PolymorphicComponentProp<\n  T extends React.ElementType,\n  Props = {},\n> = React.PropsWithChildren<Props & AsProp<T>> &\n  Omit<React.ComponentPropsWithoutRef<T>, PropsToOmit<T, Props>>\n\n/**\n * Extracts the correct ref type for a polymorphic component.\n *\n * @template T - The React element type.\n *\n * @example\n * ```tsx\n * const ref = useRef<PolymorphicRef<'button'>>(null)\n * ```\n */\nexport type PolymorphicRef<T extends React.ElementType> =\n  React.ComponentPropsWithRef<T>[\"ref\"]\n\n/**\n * Polymorphic component props with ref support.\n *\n * @template T - The React element type to render as.\n * @template Props - The component's own props.\n */\ntype PolymorphicComponentPropWithRef<\n  T extends React.ElementType,\n  Props = {},\n> = PolymorphicComponentProp<T, Props> & { ref?: PolymorphicRef<T> }\n\n/**\n * Complete props type for a polymorphic component with ref support.\n *\n * Use this type when defining props for a polymorphic component that forwards refs.\n *\n * @template T - The React element type to render as (e.g., 'button', 'a', 'div').\n * @template P - The component's own props.\n *\n * @example\n * ```tsx\n * type ButtonProps<T extends React.ElementType = 'button'> = PolymorphicComponentPropsWithRef<T, {\n *   variant?: 'primary' | 'secondary'\n * }>\n * ```\n */\nexport type PolymorphicComponentPropsWithRef<\n  T extends React.ElementType,\n  P = {},\n> = PolymorphicComponentPropWithRef<T, P>\n\n/**\n * Props type for a polymorphic component without ref support.\n *\n * Use this type when defining props for a polymorphic component that doesn't need ref forwarding.\n *\n * @template T - The React element type to render as (e.g., 'button', 'a', 'div').\n * @template P - The component's own props.\n *\n * @example\n * ```tsx\n * type TextProps<T extends React.ElementType = 'p'> = PolymorphicComponentProps<T, {\n *   size?: 'sm' | 'md' | 'lg'\n * }>\n * ```\n */\nexport type PolymorphicComponentProps<\n  T extends React.ElementType,\n  P = {},\n> = PolymorphicComponentProp<T, P>\n\n/**\n * Type definition for a polymorphic component function.\n *\n * Use this type when defining the component itself to ensure proper type inference\n * for the \"as\" prop and all element-specific props.\n *\n * @template P - The component's own props (excluding the \"as\" prop and element props).\n *\n * @example\n * ```tsx\n * type ButtonOwnProps = {\n *   variant?: 'primary' | 'secondary'\n * }\n *\n * const Button: PolymorphicComponent<ButtonOwnProps> = React.forwardRef(\n *   <T extends React.ElementType = 'button'>(\n *     { as, variant, ...props }: PolymorphicComponentPropsWithRef<T, ButtonOwnProps>,\n *     ref: PolymorphicRef<T>\n *   ) => {\n *     const Component = as || 'button'\n *     return <Component ref={ref} {...props} />\n *   }\n * )\n * ```\n */\nexport type PolymorphicComponent<P> = <T extends React.ElementType>(\n  props: PolymorphicComponentPropsWithRef<T, P>\n) => React.ReactNode\n",
      "type": "registry:lib"
    }
  ],
  "readiness": "production"
}