{
  "$schema": "https://ui.pitsi.com/schema/registry-item.json",
  "name": "background-image-parallax",
  "type": "registry:ui",
  "description": "Animation component: background image parallax",
  "files": [
    {
      "path": "registry/new-york-v4/animations/background-image-parallax/background-image-parallax.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { memo, useMemo, useRef } from \"react\"\nimport { motion, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport type BackgroundImageParallaxProps = {\n  /** Image source URL */\n  src: string\n  /** Alt text for accessibility */\n  alt?: string\n  /** Additional CSS classes */\n  className?: string\n  /** Multiplier for parallax speed. Default: 0.5 */\n  speed?: number\n  /** Foreground content to overlay on background */\n  children?: ReactNode\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Background image with parallax effect - moves slower than foreground.\n * Creates depth by having the background move at a different speed than scroll.\n * Perfect for hero sections and immersive content areas.\n */\nexport const BackgroundImageParallax = memo<BackgroundImageParallaxProps>(\n  ({\n    src,\n    alt = \"\",\n    className,\n    speed = 0.5,\n    children,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const adjustedSpeed = useMemo(\n      () => (isMobile ? speed * 0.6 : speed),\n      [isMobile, speed]\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start start\", \"end start\"],\n    })\n\n    const y = useTransform(\n      scrollYProgress,\n      [0, 1],\n      [\"0%\", `${100 * adjustedSpeed}%`]\n    )\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"relative overflow-hidden\", className)}>\n          <div className=\"absolute inset-0 -z-10\">\n            <img src={src} alt={alt} className=\"h-full w-full object-cover\" />\n          </div>\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <div ref={ref} className={cn(\"relative overflow-hidden\", className)}>\n        <motion.div\n          style={{ y }}\n          className=\"absolute inset-0 -z-10 h-[120%] w-full\"\n        >\n          <img src={src} alt={alt} className=\"h-full w-full object-cover\" />\n        </motion.div>\n        {children}\n      </div>\n    )\n  }\n)\n\nBackgroundImageParallax.displayName = \"BackgroundImageParallax\"\n\nexport type MultiLayerParallaxProps = {\n  /** Array of background layers */\n  layers: Array<{\n    /** Image source URL */\n    src: string\n    /** Parallax speed multiplier */\n    speed: number\n    /** Opacity of the layer (0-1). Default: 1 */\n    opacity?: number\n    /** Alt text for accessibility */\n    alt?: string\n  }>\n  /** Additional CSS classes */\n  className?: string\n  /** Foreground content to overlay */\n  children?: ReactNode\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Multiple background layers with different parallax speeds.\n * Creates rich depth with multiple moving layers.\n * Each layer moves at its own speed for a sophisticated parallax effect.\n */\nexport const MultiLayerParallax = memo<MultiLayerParallaxProps>(\n  ({ layers, className, children, scrollBased = true, noMobile = false }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start start\", \"end start\"],\n    })\n\n    const adjustedLayers = useMemo(\n      () =>\n        layers.map((layer) => ({\n          ...layer,\n          speed: isMobile ? layer.speed * 0.6 : layer.speed,\n        })),\n      [layers, isMobile]\n    )\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"relative overflow-hidden\", className)}>\n          {layers.map((layer, i) => (\n            <div key={i} className=\"absolute inset-0 -z-10\">\n              <img\n                src={layer.src}\n                alt={layer.alt || \"\"}\n                className=\"h-full w-full object-cover\"\n                style={{ opacity: layer.opacity || 1 }}\n              />\n            </div>\n          ))}\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <div ref={ref} className={cn(\"relative overflow-hidden\", className)}>\n        {adjustedLayers.map((layer, i) => (\n          <ParallaxLayer\n            key={i}\n            src={layer.src}\n            alt={layer.alt || \"\"}\n            opacity={layer.opacity || 1}\n            speed={layer.speed}\n            scrollYProgress={scrollYProgress}\n          />\n        ))}\n        {children}\n      </div>\n    )\n  }\n)\n\nMultiLayerParallax.displayName = \"MultiLayerParallax\"\n\n// Helper component for individual parallax layers\ntype ParallaxLayerProps = {\n  src: string\n  alt: string\n  opacity: number\n  speed: number\n  scrollYProgress: any\n}\n\nconst ParallaxLayer = memo<ParallaxLayerProps>(\n  ({ src, alt, opacity, speed, scrollYProgress }) => {\n    const y = useTransform(scrollYProgress, [0, 1], [\"0%\", `${100 * speed}%`])\n\n    return (\n      <motion.div\n        style={{ y }}\n        className=\"absolute inset-0 -z-10 h-[120%] w-full\"\n      >\n        <img\n          src={src}\n          alt={alt}\n          className=\"h-full w-full object-cover\"\n          style={{ opacity }}\n        />\n      </motion.div>\n    )\n  }\n)\n\nParallaxLayer.displayName = \"ParallaxLayer\"\n\nexport default BackgroundImageParallax\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta",
  "poweredBy": [
    {
      "name": "Motion",
      "url": "https://motion.dev"
    }
  ]
}