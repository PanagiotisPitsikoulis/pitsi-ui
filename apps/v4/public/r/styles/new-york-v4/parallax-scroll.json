{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "parallax-scroll",
  "type": "registry:ui",
  "description": "Multi-column image gallery with parallax scrolling effect.",
  "dependencies": [
    "motion"
  ],
  "registryDependencies": [
    "utils",
    "use-animation-state",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/animations/parallax-scroll/parallax-scroll.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport {\n  createContext,\n  memo,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\"\nimport { motion, MotionValue, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\n// Context for gallery scroll progress\nconst GalleryContext = createContext<{\n  scrollYProgress: MotionValue<number>\n  height: number\n} | null>(null)\n\nexport type ParallaxGalleryProps = {\n  /** Gallery columns */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Gallery height. Default: \"175vh\" */\n  height?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Container for multi-column parallax gallery.\n * Provides scroll progress to child ParallaxColumn components.\n */\nexport const ParallaxGallery = memo<ParallaxGalleryProps>(\n  ({\n    children,\n    className,\n    height = \"175vh\",\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const ref = useRef<HTMLDivElement>(null)\n    const [dimension, setDimension] = useState({ width: 0, height: 0 })\n    const { shouldUseScroll } = useAnimationState(scrollBased, noMobile)\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start end\", \"end start\"],\n    })\n\n    useEffect(() => {\n      const resize = () => {\n        setDimension({ width: window.innerWidth, height: window.innerHeight })\n      }\n      window.addEventListener(\"resize\", resize)\n      resize()\n      return () => window.removeEventListener(\"resize\", resize)\n    }, [])\n\n    return (\n      <GalleryContext.Provider\n        value={{ scrollYProgress, height: dimension.height }}\n      >\n        <div\n          ref={ref}\n          className={cn(\n            \"relative box-border flex gap-[2vw] overflow-hidden p-[2vw]\",\n            className\n          )}\n          style={{ height }}\n        >\n          {children}\n        </div>\n      </GalleryContext.Provider>\n    )\n  }\n)\n\nParallaxGallery.displayName = \"ParallaxGallery\"\n\nexport type ParallaxColumnProps = {\n  /** Column images */\n  images: string[]\n  /** Speed multiplier for parallax. Default: 1 */\n  speed?: number\n  /** Initial top offset. Default: \"-45%\" */\n  initialOffset?: string\n  /** Additional CSS classes */\n  className?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Individual column in a parallax gallery.\n * Use inside ParallaxGallery.\n */\nexport const ParallaxColumn = memo<ParallaxColumnProps>(\n  ({\n    images,\n    speed = 1,\n    initialOffset = \"-45%\",\n    className,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const context = useContext(GalleryContext)\n    const { shouldDisableAnimation } = useAnimationState(scrollBased, noMobile)\n\n    const y = useTransform(\n      context?.scrollYProgress || new MotionValue(0),\n      [0, 1],\n      [0, (context?.height || 0) * speed]\n    )\n\n    if (shouldDisableAnimation || !context) {\n      return (\n        <div\n          className={cn(\n            \"relative flex w-1/4 min-w-[250px] flex-col gap-[2vw]\",\n            className\n          )}\n          style={{ top: initialOffset }}\n        >\n          {images.map((src, i) => (\n            <div key={i} className=\"relative h-full w-full overflow-hidden\">\n              <img\n                src={src}\n                alt={`Gallery image ${i + 1}`}\n                className=\"pointer-events-none object-cover\"\n              />\n            </div>\n          ))}\n        </div>\n      )\n    }\n\n    return (\n      <motion.div\n        className={cn(\n          \"relative flex h-full w-1/4 min-w-[250px] flex-col gap-[2vw]\",\n          className\n        )}\n        style={{ y, top: initialOffset }}\n      >\n        {images.map((src, i) => (\n          <div key={i} className=\"relative h-full w-full overflow-hidden\">\n            <img\n              src={src}\n              alt={`Gallery image ${i + 1}`}\n              className=\"pointer-events-none object-cover\"\n            />\n          </div>\n        ))}\n      </motion.div>\n    )\n  }\n)\n\nParallaxColumn.displayName = \"ParallaxColumn\"\n\nexport type ParallaxScrollProps = {\n  /** Content to apply parallax effect to */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Scroll offset. Default: [\"start end\", \"end start\"] */\n  offset?: [string, string]\n  /** Y movement range. Default: [0, 100] */\n  yRange?: [number, number]\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * General-purpose parallax scroll component.\n */\nexport const ParallaxScroll = memo<ParallaxScrollProps>(\n  ({\n    children,\n    className,\n    offset = [\"start end\", \"end start\"],\n    yRange = [0, 100],\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const adjustedRange = useMemo(\n      () => (isMobile ? [yRange[0] * 0.5, yRange[1] * 0.5] : yRange),\n      [isMobile, yRange]\n    ) as [number, number]\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: offset as any,\n    })\n\n    const y = useTransform(scrollYProgress, [0, 1], adjustedRange)\n\n    if (shouldDisableAnimation) {\n      return <div className={className}>{children}</div>\n    }\n\n    return (\n      <motion.div\n        ref={ref}\n        style={{ y }}\n        className={cn(\"will-change-transform\", className)}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nParallaxScroll.displayName = \"ParallaxScroll\"\n\nexport default ParallaxGallery\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}