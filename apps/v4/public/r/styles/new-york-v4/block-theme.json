{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "block-theme",
  "type": "registry:lib",
  "description": "Theme utilities for blocks including color palettes, fonts, and tint levels.",
  "dependencies": [
    "next-themes"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/lib/block-theme.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useTheme } from \"next-themes\"\n\nimport { cn } from \"@/lib/utils\"\n\n// ============================================================================\n// Theme Types\n// ============================================================================\n\nexport type TintLevel = \"base\" | \"tinted\" | \"deep\"\nexport const DEFAULT_TINT: TintLevel = \"base\"\n\nexport type ColorPalette =\n  | \"slate\"\n  | \"azure\"\n  | \"violet\"\n  | \"rose\"\n  | \"sage\"\n  | \"amber\"\n  | \"cyan\"\n  | \"indigo\"\n  | \"coral\"\n  | \"forest\"\n\ntype ThemeStyleProps = Record<string, string>\n\ninterface ThemeStyles {\n  light: ThemeStyleProps\n  dark: ThemeStyleProps\n}\n\ninterface ThemePreset {\n  label: string\n  styles: ThemeStyles\n}\n\n// ============================================================================\n// Custom Theme Interface\n// ============================================================================\n\nexport interface CustomTheme {\n  /** Primary brand color (required for custom themes) */\n  brand: string\n  /** Complementary color (auto-computed if not provided) */\n  brandComplementary?: string\n  /** Override background color */\n  background?: string\n  /** Override foreground color */\n  foreground?: string\n  /** Override card background */\n  card?: string\n  /** Override card foreground */\n  cardForeground?: string\n  /** Override muted background */\n  muted?: string\n  /** Override muted foreground */\n  mutedForeground?: string\n}\n\n// ============================================================================\n// Font Configuration\n// ============================================================================\n\nexport type FontPreset = \"modern\" | \"elegant\" | \"classic\" | \"playful\"\n\nexport interface CustomFonts {\n  display: string\n  body: string\n  displayWeight?: string\n  bodyWeight?: string\n}\n\n// Legacy interface for backwards compatibility\nexport interface TemplateFonts {\n  display: string\n  body: string\n  displayWeight: string\n  bodyWeight: string\n}\n\nconst defaultFonts: TemplateFonts = {\n  display: \"var(--font-display), Poppins, sans-serif\",\n  body: \"var(--font-sans), Inter, sans-serif\",\n  displayWeight: \"700\",\n  bodyWeight: \"400\",\n}\n\n// Font presets\nexport const fontPresets: Record<FontPreset, TemplateFonts> = {\n  modern: {\n    display: \"var(--font-display), Poppins, sans-serif\",\n    body: \"var(--font-sans), Inter, sans-serif\",\n    displayWeight: \"700\",\n    bodyWeight: \"400\",\n  },\n  elegant: {\n    display: \"var(--font-fraunces), Fraunces, serif\",\n    body: \"var(--font-dm-sans), DM Sans, sans-serif\",\n    displayWeight: \"600\",\n    bodyWeight: \"400\",\n  },\n  classic: {\n    display: \"var(--font-playfair), Playfair Display, serif\",\n    body: \"var(--font-source-sans), Source Sans 3, sans-serif\",\n    displayWeight: \"700\",\n    bodyWeight: \"400\",\n  },\n  playful: {\n    display: \"var(--font-space-grotesk), Space Grotesk, sans-serif\",\n    body: \"var(--font-nunito), Nunito, sans-serif\",\n    displayWeight: \"700\",\n    bodyWeight: \"400\",\n  },\n}\n\n/** Get font styles from preset or custom fonts */\nexport function getFontStyles(\n  fonts?: FontPreset | CustomFonts\n): React.CSSProperties {\n  if (!fonts) {\n    return {\n      \"--font-display\": defaultFonts.display,\n      \"--font-body\": defaultFonts.body,\n      \"--font-display-weight\": defaultFonts.displayWeight,\n      \"--font-body-weight\": defaultFonts.bodyWeight,\n    } as React.CSSProperties\n  }\n\n  if (typeof fonts === \"string\") {\n    const preset = fontPresets[fonts] || defaultFonts\n    return {\n      \"--font-display\": preset.display,\n      \"--font-body\": preset.body,\n      \"--font-display-weight\": preset.displayWeight,\n      \"--font-body-weight\": preset.bodyWeight,\n    } as React.CSSProperties\n  }\n\n  return {\n    \"--font-display\": fonts.display,\n    \"--font-body\": fonts.body,\n    \"--font-display-weight\": fonts.displayWeight || \"700\",\n    \"--font-body-weight\": fonts.bodyWeight || \"400\",\n  } as React.CSSProperties\n}\n\nexport function getAllFontFamilies(): string[] {\n  const families = new Set<string>()\n  Object.values(fontPresets).forEach((fonts) => {\n    const displayFamily = fonts.display\n      .split(\",\")[0]\n      .replace(/['\"]/g, \"\")\n      .trim()\n    const bodyFamily = fonts.body.split(\",\")[0].replace(/['\"]/g, \"\").trim()\n    families.add(displayFamily)\n    families.add(bodyFamily)\n  })\n  return Array.from(families).sort()\n}\n\n// ============================================================================\n// Color Palettes & Theme Presets\n// ============================================================================\n\n// Brand colors for each palette\nconst paletteColors: Record<\n  ColorPalette,\n  { brand: string; complementary: string }\n> = {\n  slate: { brand: \"#777777\", complementary: \"#999999\" },\n  azure: { brand: \"#3b82f6\", complementary: \"#f97316\" },\n  violet: { brand: \"#8b5cf6\", complementary: \"#22c55e\" },\n  rose: { brand: \"#e11d48\", complementary: \"#14b8a6\" },\n  sage: { brand: \"#84a98c\", complementary: \"#d4a574\" },\n  amber: { brand: \"#d97706\", complementary: \"#4f46e5\" },\n  cyan: { brand: \"#06b6d4\", complementary: \"#f97316\" },\n  indigo: { brand: \"#4f46e5\", complementary: \"#f59e0b\" },\n  coral: { brand: \"#f97316\", complementary: \"#06b6d4\" },\n  forest: { brand: \"#166534\", complementary: \"#ea580c\" },\n}\n\n// Base neutral themes\nconst lightBase: ThemeStyleProps = {\n  background: \"#fefefe\",\n  foreground: \"#1f1f1f\",\n  card: \"#fcfcfc\",\n  \"card-foreground\": \"#1f1f1f\",\n  popover: \"#ffffff\",\n  \"popover-foreground\": \"#1f1f1f\",\n  primary: \"#2d2d2d\",\n  \"primary-foreground\": \"#fbfbfb\",\n  secondary: \"#f5f5f5\",\n  \"secondary-foreground\": \"#2d2d2d\",\n  muted: \"#f7f7f7\",\n  \"muted-foreground\": \"#777777\",\n  accent: \"#f5f5f5\",\n  \"accent-foreground\": \"#2d2d2d\",\n  destructive: \"#dc4545\",\n  \"destructive-foreground\": \"#fefefe\",\n  border: \"#f5f5f5\",\n  input: \"#f0f0f0\",\n  ring: \"#9a9a9a\",\n  radius: \"0.625rem\",\n  sidebar: \"#ffffff\",\n  \"sidebar-foreground\": \"#1f1f1f\",\n  \"sidebar-primary\": \"#2d2d2d\",\n  \"sidebar-primary-foreground\": \"#fbfbfb\",\n  \"sidebar-accent\": \"#f5f5f5\",\n  \"sidebar-accent-foreground\": \"#2d2d2d\",\n  \"sidebar-border\": \"#f0f0f0\",\n  \"sidebar-ring\": \"#9a9a9a\",\n  brand: \"#777777\",\n  \"brand-complementary\": \"#999999\",\n}\n\nconst darkBase: ThemeStyleProps = {\n  background: \"#262626\",\n  foreground: \"#fcfcfc\",\n  card: \"#2d2d2d\",\n  \"card-foreground\": \"#fcfcfc\",\n  popover: \"#2d2d2d\",\n  \"popover-foreground\": \"#fcfcfc\",\n  primary: \"#ebebeb\",\n  \"primary-foreground\": \"#2d2d2d\",\n  secondary: \"#383838\",\n  \"secondary-foreground\": \"#fcfcfc\",\n  muted: \"#333333\",\n  \"muted-foreground\": \"#9a9a9a\",\n  accent: \"#383838\",\n  \"accent-foreground\": \"#fcfcfc\",\n  destructive: \"#e05555\",\n  \"destructive-foreground\": \"#1f1f1f\",\n  border: \"#333333\",\n  input: \"#363636\",\n  ring: \"#777777\",\n  radius: \"0.625rem\",\n  sidebar: \"#1f1f1f\",\n  \"sidebar-foreground\": \"#f7f7f7\",\n  \"sidebar-primary\": \"#ebebeb\",\n  \"sidebar-primary-foreground\": \"#2d2d2d\",\n  \"sidebar-accent\": \"#2d2d2d\",\n  \"sidebar-accent-foreground\": \"#f7f7f7\",\n  \"sidebar-border\": \"#2f2f2f\",\n  \"sidebar-ring\": \"#777777\",\n  brand: \"#9a9a9a\",\n  \"brand-complementary\": \"#777777\",\n}\n\n// Deep background colors for each palette\nconst deepBackgrounds: Record<\n  ColorPalette,\n  { light: Partial<ThemeStyleProps>; dark: Partial<ThemeStyleProps> }\n> = {\n  slate: { light: {}, dark: {} },\n  azure: {\n    light: { background: \"#f0f7ff\", muted: \"#e6f0ff\" },\n    dark: { background: \"#1a2744\", muted: \"#243352\" },\n  },\n  sage: {\n    light: { background: \"#f5f9f6\", muted: \"#eaf2ec\" },\n    dark: { background: \"#1a261c\", muted: \"#243328\" },\n  },\n  rose: {\n    light: { background: \"#fdf2f4\", muted: \"#fce7eb\" },\n    dark: { background: \"#2a1a1e\", muted: \"#3a242a\" },\n  },\n  amber: {\n    light: { background: \"#fffbeb\", muted: \"#fef3c7\" },\n    dark: { background: \"#2a2517\", muted: \"#3a3222\" },\n  },\n  violet: {\n    light: { background: \"#f5f3ff\", muted: \"#ede9fe\" },\n    dark: { background: \"#1e1a2e\", muted: \"#2a2540\" },\n  },\n  indigo: {\n    light: { background: \"#eef2ff\", muted: \"#e0e7ff\" },\n    dark: { background: \"#1a1a2e\", muted: \"#252540\" },\n  },\n  coral: {\n    light: { background: \"#fff7ed\", muted: \"#ffedd5\" },\n    dark: { background: \"#2a1f17\", muted: \"#3a2c22\" },\n  },\n  cyan: {\n    light: { background: \"#ecfeff\", muted: \"#cffafe\" },\n    dark: { background: \"#162631\", muted: \"#1f3540\" },\n  },\n  forest: {\n    light: { background: \"#f0fdf4\", muted: \"#dcfce7\" },\n    dark: { background: \"#14261a\", muted: \"#1f3826\" },\n  },\n}\n\n// ============================================================================\n// Theme Utilities\n// ============================================================================\n\nexport function getPresetKey(palette: ColorPalette, tint: TintLevel): string {\n  if (tint === \"base\") return \"slate\"\n  if (palette === \"slate\") return \"slate\"\n  switch (tint) {\n    case \"tinted\":\n      return `${palette}-tinted`\n    case \"deep\":\n      return `${palette}-deep`\n    default:\n      return `${palette}-tinted`\n  }\n}\n\n/** Compute a complementary color (simple hue rotation) */\nfunction computeComplementaryColor(hex: string): string {\n  // Simple implementation - rotate hue by 180 degrees\n  // For production, could use a proper color library\n  const r = parseInt(hex.slice(1, 3), 16)\n  const g = parseInt(hex.slice(3, 5), 16)\n  const b = parseInt(hex.slice(5, 7), 16)\n\n  // Convert to HSL, rotate hue, convert back\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n  let h = 0\n  const l = (max + min) / 2 / 255\n\n  if (max !== min) {\n    const d = max - min\n    const s = l > 0.5 ? d / (2 * 255 - max - min) : d / (max + min)\n    switch (max) {\n      case r:\n        h = ((g - b) / d + (g < b ? 6 : 0)) / 6\n        break\n      case g:\n        h = ((b - r) / d + 2) / 6\n        break\n      case b:\n        h = ((r - g) / d + 4) / 6\n        break\n    }\n  }\n\n  // Rotate hue by 180 degrees\n  h = (h + 0.5) % 1\n\n  // Convert back to RGB\n  const hue2rgb = (p: number, q: number, t: number) => {\n    if (t < 0) t += 1\n    if (t > 1) t -= 1\n    if (t < 1 / 6) return p + (q - p) * 6 * t\n    if (t < 1 / 2) return q\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n    return p\n  }\n\n  const s = 0.5 // Keep saturation moderate\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n  const p = 2 * l - q\n\n  const newR = Math.round(hue2rgb(p, q, h + 1 / 3) * 255)\n  const newG = Math.round(hue2rgb(p, q, h) * 255)\n  const newB = Math.round(hue2rgb(p, q, h - 1 / 3) * 255)\n\n  return `#${newR.toString(16).padStart(2, \"0\")}${newG.toString(16).padStart(2, \"0\")}${newB.toString(16).padStart(2, \"0\")}`\n}\n\n/** Get theme styles from palette */\nexport function getPaletteThemeStyles(\n  palette: ColorPalette,\n  tint: TintLevel = DEFAULT_TINT,\n  mode: \"light\" | \"dark\" = \"light\"\n): React.CSSProperties {\n  const colors = paletteColors[palette]\n  const baseStyles = mode === \"light\" ? { ...lightBase } : { ...darkBase }\n\n  // Apply brand colors for non-base tints\n  if (tint !== \"base\" && palette !== \"slate\") {\n    baseStyles.brand = colors.brand\n    baseStyles[\"brand-complementary\"] = colors.complementary\n  }\n\n  // Apply deep backgrounds\n  if (tint === \"deep\" && palette !== \"slate\") {\n    const deepBg = deepBackgrounds[palette]\n    const modeDeep = mode === \"light\" ? deepBg.light : deepBg.dark\n    Object.assign(baseStyles, modeDeep)\n  }\n\n  const cssVars: Record<string, string> = {}\n  for (const [key, value] of Object.entries(baseStyles)) {\n    cssVars[`--${key}`] = value\n  }\n  return cssVars as React.CSSProperties\n}\n\n/** Get theme styles from custom theme */\nexport function getCustomThemeStyles(\n  theme: CustomTheme,\n  tint: TintLevel = DEFAULT_TINT,\n  mode: \"light\" | \"dark\" = \"light\"\n): React.CSSProperties {\n  const baseStyles = mode === \"light\" ? { ...lightBase } : { ...darkBase }\n\n  // Apply brand color\n  baseStyles.brand = theme.brand\n  baseStyles[\"brand-complementary\"] =\n    theme.brandComplementary || computeComplementaryColor(theme.brand)\n\n  // Apply optional overrides\n  if (theme.background) baseStyles.background = theme.background\n  if (theme.foreground) baseStyles.foreground = theme.foreground\n  if (theme.card) baseStyles.card = theme.card\n  if (theme.cardForeground) baseStyles[\"card-foreground\"] = theme.cardForeground\n  if (theme.muted) baseStyles.muted = theme.muted\n  if (theme.mutedForeground)\n    baseStyles[\"muted-foreground\"] = theme.mutedForeground\n\n  const cssVars: Record<string, string> = {}\n  for (const [key, value] of Object.entries(baseStyles)) {\n    cssVars[`--${key}`] = value\n  }\n  return cssVars as React.CSSProperties\n}\n\n/** Get combined theme + font styles */\nexport function getThemeStyles(options: {\n  palette?: ColorPalette\n  theme?: CustomTheme\n  tint?: TintLevel\n  mode?: \"light\" | \"dark\"\n  fonts?: FontPreset | CustomFonts\n}): React.CSSProperties {\n  const {\n    palette = \"azure\",\n    theme,\n    tint = DEFAULT_TINT,\n    mode = \"light\",\n    fonts,\n  } = options\n\n  // Get color styles\n  const colorStyles = theme\n    ? getCustomThemeStyles(theme, tint, mode)\n    : getPaletteThemeStyles(palette, tint, mode)\n\n  // Get font styles\n  const fontStyles = getFontStyles(fonts)\n\n  return { ...colorStyles, ...fontStyles }\n}\n\n// ============================================================================\n// Block Theme Wrapper Component\n// ============================================================================\n\nexport interface BlockThemeWrapperProps {\n  children: React.ReactNode\n  /** Preset color palette */\n  palette?: ColorPalette\n  /** Custom theme colors (overrides palette) */\n  theme?: CustomTheme\n  /** Tint intensity */\n  tint?: TintLevel\n  /** Font preset or custom fonts */\n  fonts?: FontPreset | CustomFonts\n  /** Force dark mode */\n  forceDark?: boolean\n  /** Force light mode */\n  forceLight?: boolean\n  /** Transparent background */\n  transparent?: boolean\n  className?: string\n}\n\nexport function BlockThemeWrapper({\n  children,\n  palette = \"azure\",\n  theme,\n  tint = DEFAULT_TINT,\n  fonts,\n  forceDark = false,\n  forceLight = false,\n  transparent = false,\n  className,\n}: BlockThemeWrapperProps) {\n  const { resolvedTheme } = useTheme()\n  const mode = forceDark\n    ? \"dark\"\n    : forceLight\n      ? \"light\"\n      : (resolvedTheme as \"light\" | \"dark\") || \"light\"\n\n  // Get styles\n  const style = getThemeStyles({\n    palette,\n    theme,\n    tint,\n    mode,\n    fonts,\n  })\n\n  return (\n    <div\n      className={cn(\n        \"font-body relative w-full\",\n        !transparent && \"bg-background\",\n        forceDark && \"dark\",\n        forceLight && \"light\",\n        className\n      )}\n      style={style}\n    >\n      {children}\n    </div>\n  )\n}\n",
      "type": "registry:lib"
    }
  ],
  "readiness": "production"
}