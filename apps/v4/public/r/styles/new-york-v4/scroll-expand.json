{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "scroll-expand",
  "type": "registry:ui",
  "description": "Content that expands as you scroll into view.",
  "dependencies": [
    "motion"
  ],
  "registryDependencies": [
    "use-animation-state",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/animations/scroll-expand/scroll-expand.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { memo, useMemo, useRef, useState } from \"react\"\nimport { AnimatePresence, motion, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport type HoverExpandImageProps = {\n  /** Image source URL */\n  src: string\n  /** Alt text for accessibility */\n  alt?: string\n  /** Label shown when expanded */\n  label?: string\n}\n\nexport type HoverExpandGalleryProps = {\n  /** Array of images to display */\n  images: HoverExpandImageProps[]\n  /** Additional CSS classes */\n  className?: string\n  /** Direction of the gallery. Default: \"horizontal\" */\n  direction?: \"horizontal\" | \"vertical\"\n  /** Collapsed size in rem. Default: 5 */\n  collapsedSize?: number\n  /** Expanded size in rem. Default: 24 */\n  expandedSize?: number\n  /** Initially active index. Default: 1 */\n  defaultActive?: number\n  /** Enable animation. Default: true */\n  animated?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Hover-activated expanding image gallery.\n * Images expand when hovered or clicked.\n */\nexport const HoverExpandGallery = memo<HoverExpandGalleryProps>(\n  ({\n    images,\n    className,\n    direction = \"horizontal\",\n    collapsedSize = 5,\n    expandedSize = 24,\n    defaultActive = 1,\n    animated = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const [activeImage, setActiveImage] = useState<number | null>(defaultActive)\n\n    const shouldDisable = noMobile && isMobile\n\n    if (shouldDisable || !animated) {\n      return (\n        <div\n          className={cn(\n            \"relative w-full max-w-6xl px-5\",\n            direction === \"vertical\" ? \"flex flex-col\" : \"flex\",\n            className\n          )}\n        >\n          <div\n            className={cn(\n              \"flex w-full items-center justify-center gap-1\",\n              direction === \"vertical\" ? \"flex-col\" : \"\"\n            )}\n          >\n            {images.map((image, index) => (\n              <div\n                key={index}\n                className=\"relative cursor-pointer overflow-hidden rounded-3xl\"\n                style={{\n                  width:\n                    direction === \"horizontal\"\n                      ? activeImage === index\n                        ? `${expandedSize}rem`\n                        : `${collapsedSize}rem`\n                      : `${expandedSize}rem`,\n                  height:\n                    direction === \"vertical\"\n                      ? activeImage === index\n                        ? `${expandedSize}rem`\n                        : `${collapsedSize / 2}rem`\n                      : `${expandedSize}rem`,\n                }}\n                onClick={() => setActiveImage(index)}\n              >\n                <img\n                  src={image.src}\n                  className=\"size-full object-cover\"\n                  alt={image.alt || \"Gallery image\"}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, translateY: 20 }}\n        animate={{ opacity: 1, translateY: 0 }}\n        transition={{ duration: 0.3, delay: 0.5 }}\n        className={cn(\"relative w-full max-w-6xl px-5\", className)}\n      >\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.3 }}\n          className=\"w-full\"\n        >\n          <div\n            className={cn(\n              \"flex w-full items-center justify-center gap-1\",\n              direction === \"vertical\" ? \"flex-col\" : \"\"\n            )}\n          >\n            {images.map((image, index) => (\n              <motion.div\n                key={index}\n                className=\"relative cursor-pointer overflow-hidden rounded-3xl\"\n                initial={{\n                  width:\n                    direction === \"horizontal\"\n                      ? \"2.5rem\"\n                      : `${expandedSize}rem`,\n                  height:\n                    direction === \"vertical\" ? \"2.5rem\" : `${expandedSize}rem`,\n                }}\n                animate={{\n                  width:\n                    direction === \"horizontal\"\n                      ? activeImage === index\n                        ? `${expandedSize}rem`\n                        : `${collapsedSize}rem`\n                      : `${expandedSize}rem`,\n                  height:\n                    direction === \"vertical\"\n                      ? activeImage === index\n                        ? `${expandedSize}rem`\n                        : \"2.5rem\"\n                      : `${expandedSize}rem`,\n                }}\n                transition={{ duration: 0.3, ease: \"easeInOut\" }}\n                onClick={() => setActiveImage(index)}\n                onHoverStart={() => setActiveImage(index)}\n              >\n                <AnimatePresence>\n                  {activeImage === index && (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      exit={{ opacity: 0 }}\n                      className=\"absolute h-full w-full bg-gradient-to-t from-black/40 to-transparent\"\n                    />\n                  )}\n                </AnimatePresence>\n                <AnimatePresence>\n                  {activeImage === index && image.label && (\n                    <motion.div\n                      initial={{\n                        opacity: 0,\n                        y: direction === \"vertical\" ? 20 : 0,\n                      }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{\n                        opacity: 0,\n                        y: direction === \"vertical\" ? 20 : 0,\n                      }}\n                      className=\"absolute flex h-full w-full flex-col items-end justify-end p-4\"\n                    >\n                      <p className=\"text-left text-xs text-white/50\">\n                        {image.label}\n                      </p>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n                <img\n                  src={image.src}\n                  className=\"size-full object-cover\"\n                  alt={image.alt || \"Gallery image\"}\n                />\n              </motion.div>\n            ))}\n          </div>\n        </motion.div>\n      </motion.div>\n    )\n  }\n)\n\nHoverExpandGallery.displayName = \"HoverExpandGallery\"\n\n// Original scroll-based expand component\nexport type ScrollExpandProps = {\n  children: ReactNode\n  className?: string\n  marginX?: string\n  borderRadius?: string\n  scrollBased?: boolean\n  noMobile?: boolean\n}\n\n/**\n * Element that expands margins on scroll.\n * Creates a reveal effect with animated margins and border radius.\n */\nexport const ScrollExpand = memo<ScrollExpandProps>(\n  ({\n    children,\n    className,\n    marginX = \"3rem\",\n    borderRadius = \"3rem\",\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const marginXAdjusted = useMemo(\n      () => (isMobile ? \"0.5rem\" : marginX),\n      [isMobile, marginX]\n    )\n    const borderRadiusAdjusted = useMemo(\n      () => (isMobile ? \"1rem\" : borderRadius),\n      [isMobile, borderRadius]\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start 80%\", \"start 30%\"],\n    })\n\n    const marginLeft = useTransform(\n      scrollYProgress,\n      [0, 1],\n      [marginXAdjusted, \"0rem\"]\n    )\n    const marginRight = useTransform(\n      scrollYProgress,\n      [0, 1],\n      [marginXAdjusted, \"0rem\"]\n    )\n    const borderRadiusValue = useTransform(\n      scrollYProgress,\n      [0, 1],\n      [borderRadiusAdjusted, \"0rem\"]\n    )\n\n    const style = useMemo(\n      () => ({\n        overflow: \"hidden\" as const,\n      }),\n      []\n    )\n\n    const triggerStyle = useMemo(\n      () => ({\n        overflow: \"hidden\" as const,\n        borderRadius,\n      }),\n      [borderRadius]\n    )\n\n    if (shouldDisableAnimation) {\n      return <div className={className}>{children}</div>\n    }\n\n    if (scrollBased) {\n      return (\n        <motion.div\n          ref={ref}\n          style={{\n            marginLeft,\n            marginRight,\n            borderRadius: borderRadiusValue,\n            ...style,\n          }}\n          className={className}\n        >\n          {children}\n        </motion.div>\n      )\n    }\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        whileInView={{ opacity: 1, scale: 1 }}\n        viewport={{ once: false, margin: \"-100px\" }}\n        transition={{ duration: 0.9, delay: 0.3, ease: [0.25, 0.4, 0.25, 1] }}\n        className={className}\n        style={triggerStyle}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nScrollExpand.displayName = \"ScrollExpand\"\n\nexport default HoverExpandGallery\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta",
  "poweredBy": [
    {
      "name": "Skiper UI",
      "url": "https://skiper-ui.com"
    }
  ]
}