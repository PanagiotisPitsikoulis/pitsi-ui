{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "zoom-parallax",
  "type": "registry:ui",
  "description": "Images that zoom and move on scroll.",
  "dependencies": [
    "motion"
  ],
  "registryDependencies": [
    "utils",
    "use-animation-state",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/animations/zoom-parallax/zoom-parallax.tsx",
      "content": "\"use client\"\n\nimport type { CSSProperties, ReactNode } from \"react\"\nimport { createContext, memo, useContext, useMemo, useRef } from \"react\"\nimport { motion, MotionValue, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\n// Context for gallery scroll progress\nconst ZoomGalleryContext = createContext<MotionValue<number> | null>(null)\n\nexport type ZoomGalleryContainerProps = {\n  /** Gallery images */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Container height. Default: \"300vh\" */\n  height?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Container for zoom parallax gallery effect.\n * Provides scroll progress to child ZoomGalleryImage components.\n */\nexport const ZoomGalleryContainer = memo<ZoomGalleryContainerProps>(\n  ({\n    children,\n    className,\n    height = \"300vh\",\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldUseScroll, shouldDisableAnimation } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start start\", \"end end\"],\n    })\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"relative\", className)} style={{ height }}>\n          <div className=\"sticky top-0 h-screen overflow-hidden\">\n            {children}\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <ZoomGalleryContext.Provider value={scrollYProgress}>\n        <div ref={ref} className={cn(\"relative\", className)} style={{ height }}>\n          <div className=\"sticky top-0 h-screen overflow-hidden\">\n            {children}\n          </div>\n        </div>\n      </ZoomGalleryContext.Provider>\n    )\n  }\n)\n\nZoomGalleryContainer.displayName = \"ZoomGalleryContainer\"\n\nexport type ZoomGalleryImageProps = {\n  /** Image source URL */\n  src: string\n  /** Alt text for accessibility */\n  alt?: string\n  /** Target scale at end of scroll. Default: 4 */\n  targetScale?: number\n  /** Position and size styles */\n  style?: CSSProperties\n  /** Additional CSS classes */\n  className?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Individual image in a zoom parallax gallery.\n * Use inside ZoomGalleryContainer.\n */\nexport const ZoomGalleryImage = memo<ZoomGalleryImageProps>(\n  ({\n    src,\n    alt = \"Gallery image\",\n    targetScale = 4,\n    style,\n    className,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const context = useContext(ZoomGalleryContext)\n    const { shouldDisableAnimation } = useAnimationState(scrollBased, noMobile)\n\n    const scale = useTransform(\n      context || new MotionValue(0),\n      [0, 1],\n      [1, targetScale]\n    )\n\n    if (shouldDisableAnimation || !context) {\n      return (\n        <div className=\"absolute top-0 flex h-full w-full items-center justify-center\">\n          <div\n            className={cn(\"relative\", className)}\n            style={style || { width: \"25vw\", height: \"25vh\" }}\n          >\n            <img src={src} alt={alt} className=\"h-full w-full object-cover\" />\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <motion.div\n        style={{ scale }}\n        className=\"absolute top-0 flex h-full w-full items-center justify-center\"\n      >\n        <div\n          className={cn(\"relative\", className)}\n          style={style || { width: \"25vw\", height: \"25vh\" }}\n        >\n          <img src={src} alt={alt} className=\"h-full w-full object-cover\" />\n        </div>\n      </motion.div>\n    )\n  }\n)\n\nZoomGalleryImage.displayName = \"ZoomGalleryImage\"\n\n// Original simple zoom component\nexport type ZoomParallaxProps = {\n  /** Content to apply zoom effect to */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Scale range from start to end. Default: [0.8, 1] */\n  scaleRange?: [number, number]\n  /** When to start/end animation relative to viewport. Default: [\"start end\", \"end start\"] */\n  offset?: [string, string]\n  /** Whether to animate opacity alongside scale. Default: true */\n  animateOpacity?: boolean\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Element that zooms in/out as you scroll past it.\n * Creates a dynamic focal point effect with scale and optional opacity animation.\n */\nexport const ZoomParallax = memo<ZoomParallaxProps>(\n  ({\n    children,\n    className,\n    scaleRange = [0.8, 1],\n    offset = [\"start end\", \"end start\"],\n    animateOpacity = true,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const isMobile = useIsMobile()\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldDisableAnimation, shouldUseScroll } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const adjustedScaleRange = useMemo(\n      () =>\n        isMobile\n          ? [\n              scaleRange[0] + (scaleRange[1] - scaleRange[0]) * 0.5,\n              scaleRange[1],\n            ]\n          : scaleRange,\n      [isMobile, scaleRange]\n    ) as [number, number]\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: offset as any,\n    })\n\n    const scale = useTransform(scrollYProgress, [0, 1], adjustedScaleRange)\n    const opacity = useTransform(scrollYProgress, [0, 0.5, 1], [0.5, 1, 0.5])\n\n    const motionStyle = useMemo(\n      () => ({\n        scale,\n        ...(animateOpacity && { opacity }),\n      }),\n      [scale, opacity, animateOpacity]\n    )\n\n    if (shouldDisableAnimation) {\n      return <div className={className}>{children}</div>\n    }\n\n    return (\n      <motion.div\n        ref={ref}\n        style={motionStyle}\n        className={cn(\"will-change-transform\", className)}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nZoomParallax.displayName = \"ZoomParallax\"\n\nexport type ZoomParallaxImageProps = {\n  /** Image source URL */\n  src: string\n  /** Alt text for accessibility */\n  alt: string\n  /** Additional CSS classes */\n  className?: string\n  /** Scale range for the zoom effect. Default: [1, 1.2] */\n  scaleRange?: [number, number]\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Image component with zoom parallax effect.\n * Optimized for image galleries and hero sections.\n */\nexport const ZoomParallaxImage = memo<ZoomParallaxImageProps>(\n  ({ src, alt, className, scaleRange = [1, 1.2], noMobile = false }) => {\n    return (\n      <ZoomParallax\n        scaleRange={scaleRange}\n        noMobile={noMobile}\n        animateOpacity={false}\n      >\n        <div className={cn(\"overflow-hidden rounded-2xl\", className)}>\n          <img src={src} alt={alt} className=\"h-full w-full object-cover\" />\n        </div>\n      </ZoomParallax>\n    )\n  }\n)\n\nZoomParallaxImage.displayName = \"ZoomParallaxImage\"\n\nexport default ZoomGalleryContainer\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}