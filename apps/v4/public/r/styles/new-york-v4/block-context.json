{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "block-context",
  "type": "registry:lib",
  "description": "Context provider for blocks with alternating backgrounds and surface styling.",
  "registryDependencies": [
    "utils",
    "block-theme"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/lib/block-context.tsx",
      "content": "\"use client\"\n\nimport { createContext, useContext, type ReactNode } from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nimport type { TintLevel } from \"./block-theme\"\n\n// ============================================================================\n// Block Context Types\n// ============================================================================\n\ntype ContainerBg = \"page\" | \"muted\"\n\nexport interface BlockContextValue {\n  index: number\n  isEven: boolean\n  containerBg: ContainerBg\n  /** CSS class for cards */\n  cardBg: string\n  /** CSS class for surfaces/sections within the block */\n  surfaceBg: string\n}\n\n// ============================================================================\n// Block Context\n// ============================================================================\n\nconst BlockContext = createContext<BlockContextValue | null>(null)\n\n/**\n * Hook to access block context values.\n * Returns defaults if used outside a BlockProvider (standalone block usage).\n */\nexport function useBlockContext(): BlockContextValue {\n  const context = useContext(BlockContext)\n  if (!context) {\n    // Return defaults if used outside provider (standalone block)\n    return {\n      index: 0,\n      isEven: true,\n      containerBg: \"page\" as ContainerBg,\n      cardBg: \"bg-card shadow-sm\",\n      surfaceBg: \"bg-muted\",\n    }\n  }\n  return context\n}\n\n// ============================================================================\n// Block Provider\n// ============================================================================\n\nexport interface BlockProviderProps {\n  /** Block index (0-based) for alternating styles */\n  index: number\n  children: ReactNode\n}\n\n/**\n * Provides block context for alternating backgrounds and derived styling.\n * Even blocks = page background, Odd blocks = muted background.\n */\nexport function BlockProvider({ index, children }: BlockProviderProps) {\n  const isEven = index % 2 === 0\n  const containerBg: ContainerBg = isEven ? \"page\" : \"muted\"\n\n  // When container is page (light), cards should be muted/card\n  // When container is muted (darker), cards should be background/card\n  const cardBg =\n    containerBg === \"page\" ? \"bg-card shadow-sm\" : \"bg-background shadow-sm\"\n  const surfaceBg = containerBg === \"page\" ? \"bg-muted\" : \"bg-background\"\n\n  const value: BlockContextValue = {\n    index,\n    isEven,\n    containerBg,\n    cardBg,\n    surfaceBg,\n  }\n\n  return <BlockContext.Provider value={value}>{children}</BlockContext.Provider>\n}\n\n// ============================================================================\n// Block Container\n// ============================================================================\n\nexport interface BlockContainerProps {\n  /** Block index for alternating backgrounds */\n  index: number\n  children: ReactNode\n  className?: string\n  /** Override the automatic alternating background */\n  forceBg?: \"page\" | \"muted\" | \"none\"\n  /** Tint level - deep tinted blocks skip alternating bg */\n  tint?: TintLevel\n  /** Skip container padding (for heroes, headers) */\n  noPadding?: boolean\n}\n\n/**\n * Container wrapper for blocks with alternating backgrounds and proper spacing.\n * Wraps content with BlockProvider for context.\n */\nexport function BlockContainer({\n  index,\n  children,\n  className,\n  forceBg,\n  tint,\n  noPadding = false,\n}: BlockContainerProps) {\n  const isEven = index % 2 === 0\n  // Deep tinted blocks have their own strong bg, skip alternating\n  const isDeepTinted = tint === \"deep\"\n\n  // Determine background class\n  let bgClass = \"\"\n  if (forceBg === \"none\" || isDeepTinted) {\n    bgClass = \"\"\n  } else if (forceBg) {\n    bgClass = forceBg === \"page\" ? \"bg-background\" : \"bg-muted\"\n  } else {\n    // Automatic alternating: even = background, odd = muted\n    bgClass = isEven ? \"bg-background\" : \"bg-muted\"\n  }\n\n  return (\n    <BlockProvider index={index}>\n      <div className={cn(bgClass, !noPadding && \"py-24 md:py-32\", className)}>\n        {children}\n      </div>\n    </BlockProvider>\n  )\n}\n",
      "type": "registry:lib"
    }
  ],
  "readiness": "production"
}