{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "app-block-viewer-1",
  "type": "registry:block",
  "description": "Block viewer with resizable preview, code panel, file tree, and device toggles",
  "registryDependencies": [
    "badge",
    "button",
    "resizable",
    "separator",
    "tabs",
    "toggle-group"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/blocks/application/app-block-viewer-1.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport Link from \"next/link\"\nimport {\n  Check,\n  ChevronRight,\n  Clipboard,\n  File,\n  Folder,\n  FolderOpen,\n  Maximize,\n  Monitor,\n  RefreshCw,\n  Smartphone,\n  Tablet,\n  Terminal,\n} from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/registry/new-york-v4/ui/badge\"\nimport { Button } from \"@/registry/new-york-v4/ui/button\"\nimport {\n  ResizableHandle,\n  ResizablePanel,\n  ResizablePanelGroup,\n} from \"@/registry/new-york-v4/ui/resizable\"\nimport { Separator } from \"@/registry/new-york-v4/ui/separator\"\nimport { Tabs, TabsList, TabsTrigger } from \"@/registry/new-york-v4/ui/tabs\"\nimport {\n  ToggleGroup,\n  ToggleGroupItem,\n} from \"@/registry/new-york-v4/ui/toggle-group\"\n\n// Types\ntype ReadinessLevel = \"alpha\" | \"beta\" | \"production\"\ntype TierLevel = \"free\" | \"pro\"\ntype ViewMode = \"preview\" | \"code\"\n\ninterface FileNode {\n  name: string\n  type: \"file\" | \"folder\"\n  path: string\n  children?: FileNode[]\n}\n\ninterface CodeFile {\n  path: string\n  content: string\n  language: string\n}\n\n// Readiness Badge\nfunction ReadinessIndicator({ readiness }: { readiness?: ReadinessLevel }) {\n  if (!readiness) return null\n\n  const config = {\n    alpha: { label: \"Alpha\", variant: \"secondary\" as const },\n    beta: { label: \"Beta\", variant: \"outline\" as const },\n    production: { label: \"Stable\", variant: \"default\" as const },\n  }\n\n  const { label, variant } = config[readiness]\n\n  return (\n    <Badge variant={variant} className=\"text-xs\">\n      {label}\n    </Badge>\n  )\n}\n\n// Tier Badge\nfunction TierIndicator({ tier }: { tier?: TierLevel }) {\n  if (!tier || tier === \"free\") return null\n\n  return (\n    <Badge className=\"bg-primary/10 text-primary border-primary/20 border text-xs\">\n      Pro\n    </Badge>\n  )\n}\n\n// File Tree Node\nfunction FileTreeNode({\n  node,\n  activeFile,\n  onSelect,\n  depth = 0,\n}: {\n  node: FileNode\n  activeFile: string | null\n  onSelect: (path: string) => void\n  depth?: number\n}) {\n  const [isOpen, setIsOpen] = React.useState(depth < 2)\n  const isActive = activeFile === node.path\n\n  if (node.type === \"folder\") {\n    return (\n      <div>\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"hover:bg-muted flex w-full items-center gap-1.5 rounded px-2 py-1 text-sm\"\n          style={{ paddingLeft: `${depth * 12 + 8}px` }}\n        >\n          <ChevronRight\n            className={cn(\n              \"size-3.5 transition-transform\",\n              isOpen && \"rotate-90\"\n            )}\n          />\n          {isOpen ? (\n            <FolderOpen className=\"text-muted-foreground size-4\" />\n          ) : (\n            <Folder className=\"text-muted-foreground size-4\" />\n          )}\n          <span className=\"truncate\">{node.name}</span>\n        </button>\n        {isOpen && node.children && (\n          <div>\n            {node.children.map((child) => (\n              <FileTreeNode\n                key={child.path}\n                node={child}\n                activeFile={activeFile}\n                onSelect={onSelect}\n                depth={depth + 1}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <button\n      onClick={() => onSelect(node.path)}\n      className={cn(\n        \"flex w-full items-center gap-1.5 rounded px-2 py-1 text-sm\",\n        isActive ? \"bg-accent text-accent-foreground\" : \"hover:bg-muted\"\n      )}\n      style={{ paddingLeft: `${depth * 12 + 8}px` }}\n    >\n      <File className=\"text-muted-foreground size-4\" />\n      <span className=\"truncate\">{node.name}</span>\n    </button>\n  )\n}\n\n// File Tree Sidebar\nfunction FileTreeSidebar({\n  tree,\n  activeFile,\n  onSelectFile,\n}: {\n  tree: FileNode[]\n  activeFile: string | null\n  onSelectFile: (path: string) => void\n}) {\n  return (\n    <div className=\"border-r p-2\">\n      <div className=\"text-muted-foreground mb-2 px-2 text-xs font-medium tracking-wider uppercase\">\n        Files\n      </div>\n      <div className=\"space-y-0.5\">\n        {tree.map((node) => (\n          <FileTreeNode\n            key={node.path}\n            node={node}\n            activeFile={activeFile}\n            onSelect={onSelectFile}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\n// Default data\nconst appBlockViewer1Defaults = {\n  name: \"hero-1\",\n  readiness: \"production\" as ReadinessLevel,\n  tier: \"free\" as TierLevel,\n  viewUrl: \"/view/new-york-v4/hero-1\",\n  iframeHeight: 800,\n  fileTree: [\n    {\n      name: \"components\",\n      type: \"folder\" as const,\n      path: \"components\",\n      children: [\n        {\n          name: \"hero-1.tsx\",\n          type: \"file\" as const,\n          path: \"components/hero-1.tsx\",\n        },\n      ],\n    },\n    {\n      name: \"lib\",\n      type: \"folder\" as const,\n      path: \"lib\",\n      children: [\n        {\n          name: \"utils.ts\",\n          type: \"file\" as const,\n          path: \"lib/utils.ts\",\n        },\n      ],\n    },\n  ] as FileNode[],\n  codeFiles: [\n    {\n      path: \"components/hero-1.tsx\",\n      language: \"tsx\",\n      content: `import { Button } from \"@/components/ui/button\"\n\nexport function Hero1() {\n  return (\n    <section className=\"container py-24\">\n      <div className=\"mx-auto max-w-3xl text-center\">\n        <h1 className=\"text-4xl font-bold tracking-tight sm:text-6xl\">\n          Build beautiful apps faster\n        </h1>\n        <p className=\"mt-6 text-lg text-muted-foreground\">\n          A collection of beautifully designed, accessible components\n          that you can copy and paste into your apps.\n        </p>\n        <div className=\"mt-10 flex items-center justify-center gap-4\">\n          <Button size=\"lg\">Get Started</Button>\n          <Button variant=\"outline\" size=\"lg\">Learn More</Button>\n        </div>\n      </div>\n    </section>\n  )\n}`,\n    },\n    {\n      path: \"lib/utils.ts\",\n      language: \"ts\",\n      content: `import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}`,\n    },\n  ] as CodeFile[],\n}\n\ninterface AppBlockViewer1Props {\n  name?: string\n  readiness?: ReadinessLevel\n  tier?: TierLevel\n  viewUrl?: string\n  iframeHeight?: number\n  fileTree?: FileNode[]\n  codeFiles?: CodeFile[]\n  className?: string\n}\n\nexport function AppBlockViewer1({\n  name = appBlockViewer1Defaults.name,\n  readiness = appBlockViewer1Defaults.readiness,\n  tier = appBlockViewer1Defaults.tier,\n  viewUrl = appBlockViewer1Defaults.viewUrl,\n  iframeHeight = appBlockViewer1Defaults.iframeHeight,\n  fileTree = appBlockViewer1Defaults.fileTree,\n  codeFiles = appBlockViewer1Defaults.codeFiles,\n  className,\n}: AppBlockViewer1Props) {\n  const [view, setView] = React.useState<ViewMode>(\"preview\")\n  const [activeFile, setActiveFile] = React.useState<string>(\n    codeFiles[0]?.path ?? \"\"\n  )\n  const [panelSize, setPanelSize] = React.useState(100)\n  const [iframeKey, setIframeKey] = React.useState(0)\n  const [copied, setCopied] = React.useState(false)\n\n  const activeCode = codeFiles.find((f) => f.path === activeFile)\n\n  const handleCopyCommand = async () => {\n    await navigator.clipboard.writeText(`npx pitsi@latest add ${name}`)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  const handleCopyCode = async () => {\n    if (activeCode) {\n      await navigator.clipboard.writeText(activeCode.content)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    }\n  }\n\n  return (\n    <div\n      className={cn(\n        \"bg-background flex flex-col overflow-hidden rounded-xl border shadow-sm\",\n        className\n      )}\n      style={{ \"--iframe-height\": `${iframeHeight}px` } as React.CSSProperties}\n    >\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between border-b px-4 py-2\">\n        {/* Left: View Toggle */}\n        <div className=\"flex items-center gap-3\">\n          <Tabs value={view} onValueChange={(v) => setView(v as ViewMode)}>\n            <TabsList className=\"h-8\">\n              <TabsTrigger value=\"preview\" className=\"px-3 text-xs\">\n                Preview\n              </TabsTrigger>\n              <TabsTrigger value=\"code\" className=\"px-3 text-xs\">\n                Code\n              </TabsTrigger>\n            </TabsList>\n          </Tabs>\n\n          <Separator orientation=\"vertical\" className=\"hidden h-4 lg:block\" />\n\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"hidden size-8 lg:flex\"\n            asChild\n          >\n            <Link href={viewUrl} target=\"_blank\" title=\"Open in New Tab\">\n              <Maximize className=\"size-4\" />\n            </Link>\n          </Button>\n        </div>\n\n        {/* Right: Device Toggle & CLI */}\n        <div className=\"hidden items-center gap-1.5 lg:flex\">\n          {/* Device Size Toggles */}\n          <div className=\"flex h-8 items-center gap-0.5 rounded-md border p-0.5\">\n            <ToggleGroup\n              type=\"single\"\n              value={String(panelSize)}\n              onValueChange={(value) => {\n                if (value) {\n                  setView(\"preview\")\n                  setPanelSize(parseInt(value))\n                }\n              }}\n            >\n              <ToggleGroupItem\n                value=\"100\"\n                className=\"size-7 p-0\"\n                title=\"Desktop\"\n              >\n                <Monitor className=\"size-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"60\" className=\"size-7 p-0\" title=\"Tablet\">\n                <Tablet className=\"size-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"30\" className=\"size-7 p-0\" title=\"Mobile\">\n                <Smartphone className=\"size-4\" />\n              </ToggleGroupItem>\n            </ToggleGroup>\n\n            <Separator orientation=\"vertical\" className=\"mx-0.5 h-4\" />\n\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"size-7 p-0\"\n              title=\"Refresh Preview\"\n              onClick={() => setIframeKey((k) => k + 1)}\n            >\n              <RefreshCw className=\"size-4\" />\n            </Button>\n          </div>\n\n          <Separator orientation=\"vertical\" className=\"h-4\" />\n\n          {/* CLI Copy Button */}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"h-8 gap-1.5 font-mono text-xs\"\n            onClick={handleCopyCommand}\n          >\n            {copied ? (\n              <Check className=\"size-3.5\" />\n            ) : (\n              <Terminal className=\"size-3.5\" />\n            )}\n            npx pitsi add {name}\n          </Button>\n        </div>\n      </div>\n\n      {/* Content */}\n      {view === \"preview\" ? (\n        <div className=\"relative h-[var(--iframe-height)]\">\n          <ResizablePanelGroup direction=\"horizontal\">\n            <ResizablePanel\n              defaultSize={panelSize}\n              minSize={30}\n              onResize={setPanelSize}\n              className=\"bg-background relative\"\n            >\n              {/* Badges */}\n              <div className=\"absolute top-2 left-2 z-10 flex items-center gap-2\">\n                <ReadinessIndicator readiness={readiness} />\n                <TierIndicator tier={tier} />\n              </div>\n\n              {/* Iframe */}\n              <iframe\n                key={iframeKey}\n                src={viewUrl}\n                className=\"size-full\"\n                title={`Preview of ${name}`}\n              />\n            </ResizablePanel>\n            <ResizableHandle className=\"w-3 bg-transparent\" />\n            <ResizablePanel defaultSize={100 - panelSize} minSize={0} />\n          </ResizablePanelGroup>\n        </div>\n      ) : (\n        <div className=\"bg-muted/50 flex h-[var(--iframe-height)]\">\n          {/* File Tree */}\n          <div className=\"hidden w-64 shrink-0 overflow-auto md:block\">\n            <FileTreeSidebar\n              tree={fileTree}\n              activeFile={activeFile}\n              onSelectFile={setActiveFile}\n            />\n          </div>\n\n          {/* Code Panel */}\n          <div className=\"flex min-w-0 flex-1 flex-col\">\n            {/* File Header */}\n            <div className=\"bg-background flex h-12 items-center justify-between border-b px-4\">\n              <span className=\"text-muted-foreground text-sm\">\n                {activeFile}\n              </span>\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"size-7\"\n                onClick={handleCopyCode}\n              >\n                {copied ? (\n                  <Check className=\"size-3.5\" />\n                ) : (\n                  <Clipboard className=\"size-3.5\" />\n                )}\n              </Button>\n            </div>\n\n            {/* Code Content */}\n            <div className=\"flex-1 overflow-auto\">\n              <pre className=\"p-4 text-sm\">\n                <code>{activeCode?.content}</code>\n              </pre>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n",
      "type": "registry:block"
    }
  ],
  "categories": [
    "application",
    "docs"
  ],
  "tier": "free",
  "readiness": "production",
  "blockConfig": {
    "template": "service-library",
    "blockType": "application",
    "order": 5,
    "palette": "neutral",
    "typography": "modern",
    "tint": "base"
  }
}