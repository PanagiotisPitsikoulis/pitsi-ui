{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "decay-card",
  "type": "registry:ui",
  "description": "Card with decay and glitch animation effects.",
  "dependencies": [
    "gsap"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/new-york-v4/animations/decay-card/decay-card.tsx",
      "content": "\"use client\"\n\nimport React, { ReactNode, useEffect, useRef } from \"react\"\nimport { gsap } from \"gsap\"\n\ninterface DecayCardProps {\n  width?: number\n  height?: number\n  image?: string\n  children?: ReactNode\n}\n\nconst DecayCard: React.FC<DecayCardProps> = ({\n  width = 300,\n  height = 400,\n  image = \"https://picsum.photos/300/400?grayscale\",\n  children,\n}) => {\n  const svgRef = useRef<HTMLDivElement | null>(null)\n  const displacementMapRef = useRef<SVGFEDisplacementMapElement | null>(null)\n  const cursor = useRef<{ x: number; y: number }>({\n    x: 0,\n    y: 0,\n  })\n  const cachedCursor = useRef<{ x: number; y: number }>({ x: 0, y: 0 })\n  const winsize = useRef<{ width: number; height: number }>({\n    width: 0,\n    height: 0,\n  })\n\n  // Initialize window-dependent values on mount\n  useEffect(() => {\n    cursor.current = { x: window.innerWidth / 2, y: window.innerHeight / 2 }\n    cachedCursor.current = { ...cursor.current }\n    winsize.current = { width: window.innerWidth, height: window.innerHeight }\n  }, [])\n\n  useEffect(() => {\n    const lerp = (a: number, b: number, n: number): number =>\n      (1 - n) * a + n * b\n    const map = (\n      x: number,\n      a: number,\n      b: number,\n      c: number,\n      d: number\n    ): number => ((x - a) * (d - c)) / (b - a) + c\n    const distance = (x1: number, x2: number, y1: number, y2: number): number =>\n      Math.hypot(x1 - x2, y1 - y2)\n\n    const handleResize = (): void => {\n      winsize.current = {\n        width: window.innerWidth,\n        height: window.innerHeight,\n      }\n    }\n\n    const handleMouseMove = (ev: MouseEvent): void => {\n      cursor.current = { x: ev.clientX, y: ev.clientY }\n    }\n\n    window.addEventListener(\"resize\", handleResize)\n    window.addEventListener(\"mousemove\", handleMouseMove)\n\n    const imgValues = {\n      imgTransforms: { x: 0, y: 0, rz: 0 },\n      displacementScale: 0,\n    }\n\n    const render = () => {\n      let targetX = lerp(\n        imgValues.imgTransforms.x,\n        map(cursor.current.x, 0, winsize.current.width, -120, 120),\n        0.1\n      )\n      let targetY = lerp(\n        imgValues.imgTransforms.y,\n        map(cursor.current.y, 0, winsize.current.height, -120, 120),\n        0.1\n      )\n      let targetRz = lerp(\n        imgValues.imgTransforms.rz,\n        map(cursor.current.x, 0, winsize.current.width, -10, 10),\n        0.1\n      )\n\n      const bound = 50\n      if (targetX > bound) targetX = bound + (targetX - bound) * 0.2\n      if (targetX < -bound) targetX = -bound + (targetX + bound) * 0.2\n      if (targetY > bound) targetY = bound + (targetY - bound) * 0.2\n      if (targetY < -bound) targetY = -bound + (targetY + bound) * 0.2\n\n      imgValues.imgTransforms.x = targetX\n      imgValues.imgTransforms.y = targetY\n      imgValues.imgTransforms.rz = targetRz\n\n      if (svgRef.current) {\n        gsap.set(svgRef.current, {\n          x: imgValues.imgTransforms.x,\n          y: imgValues.imgTransforms.y,\n          rotateZ: imgValues.imgTransforms.rz,\n        })\n      }\n\n      const cursorTravelledDistance = distance(\n        cachedCursor.current.x,\n        cursor.current.x,\n        cachedCursor.current.y,\n        cursor.current.y\n      )\n      imgValues.displacementScale = lerp(\n        imgValues.displacementScale,\n        map(cursorTravelledDistance, 0, 200, 0, 400),\n        0.06\n      )\n\n      if (displacementMapRef.current) {\n        gsap.set(displacementMapRef.current, {\n          attr: { scale: imgValues.displacementScale },\n        })\n      }\n\n      cachedCursor.current = { ...cursor.current }\n\n      requestAnimationFrame(render)\n    }\n\n    render()\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize)\n      window.removeEventListener(\"mousemove\", handleMouseMove)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={svgRef}\n      className=\"relative\"\n      style={{ width: `${width}px`, height: `${height}px` }}\n    >\n      <svg\n        viewBox=\"-60 -75 720 900\"\n        preserveAspectRatio=\"xMidYMid slice\"\n        className=\"relative block h-full w-full [will-change:transform]\"\n      >\n        <filter id=\"imgFilter\">\n          <feTurbulence\n            type=\"turbulence\"\n            baseFrequency=\"0.015\"\n            numOctaves=\"5\"\n            seed=\"4\"\n            stitchTiles=\"stitch\"\n            x=\"0%\"\n            y=\"0%\"\n            width=\"100%\"\n            height=\"100%\"\n            result=\"turbulence1\"\n          />\n          <feDisplacementMap\n            ref={displacementMapRef}\n            in=\"SourceGraphic\"\n            in2=\"turbulence1\"\n            scale=\"0\"\n            xChannelSelector=\"R\"\n            yChannelSelector=\"B\"\n            x=\"0%\"\n            y=\"0%\"\n            width=\"100%\"\n            height=\"100%\"\n            result=\"displacementMap3\"\n          />\n        </filter>\n        <g>\n          <image\n            href={image}\n            x=\"0\"\n            y=\"0\"\n            width=\"600\"\n            height=\"750\"\n            filter=\"url(#imgFilter)\"\n            preserveAspectRatio=\"xMidYMid slice\"\n          />\n        </g>\n      </svg>\n      <div className=\"absolute bottom-[1.2em] left-[1em] text-[2.5rem] leading-[1.5em] font-black tracking-[-0.5px] first-line:text-[6rem]\">\n        {children}\n      </div>\n    </div>\n  )\n}\n\nexport default DecayCard\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta"
}