{
  "$schema": "https://ui.pitsi.com/schema/registry-item.json",
  "name": "theme-toggle",
  "type": "registry:ui",
  "dependencies": [
    "next-themes",
    "@remixicon/react"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/ui/theme-toggle.tsx",
      "content": "\"use client\"\n\nimport {\n  useEffect,\n  useLayoutEffect,\n  useState,\n  type HTMLAttributes,\n} from \"react\"\nimport { Moon, SlidersHorizontal, Sun } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\n\nimport { cn } from \"@/registry/new-york-v4/lib/utils\"\nimport {\n  SegmentedControl,\n  SegmentedControlList,\n  SegmentedControlTrigger,\n} from \"@/registry/new-york-v4/ui/segmented-control\"\n\nconst themes = [\n  [\"light\", Sun] as const,\n  [\"dark\", Moon] as const,\n  [\"system\", SlidersHorizontal] as const,\n]\n\nexport interface ThemeToggleProps extends HTMLAttributes<HTMLDivElement> {\n  mode?: \"light-dark\" | \"light-dark-system\"\n}\n\nexport function ThemeToggle({\n  className,\n  mode = \"light-dark-system\",\n  ...props\n}: ThemeToggleProps) {\n  const { setTheme, theme, resolvedTheme } = useTheme()\n  const [mounted, setMounted] = useState(false)\n  const [localValue, setLocalValue] = useState<string | null>(null)\n\n  useLayoutEffect(() => {\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    setMounted(true)\n  }, [])\n\n  // Sync local value with theme after mount\n  useEffect(() => {\n    if (mounted) {\n      // eslint-disable-next-line react-hooks/set-state-in-effect\n      setLocalValue(\n        mode === \"light-dark\" ? (resolvedTheme as string) : (theme as string)\n      )\n    }\n  }, [mounted, theme, resolvedTheme, mode])\n\n  const handleThemeChange = (newTheme: string) => {\n    // Update local state immediately for animation\n    setLocalValue(newTheme)\n\n    // Delay actual theme change to allow animation to complete (300ms duration)\n    setTimeout(() => {\n      setTheme(newTheme)\n    }, 300)\n  }\n\n  // Light-dark toggle (only sun and moon)\n  if (mode === \"light-dark\") {\n    const value = localValue ?? (mounted ? resolvedTheme : \"system\")\n\n    return (\n      <div className={cn(\"w-fit\", className)} {...props}>\n        <SegmentedControl\n          value={value}\n          className=\"bg-background\"\n          onValueChange={(newTheme) => {\n            const nextTheme = value === \"light\" ? \"dark\" : \"light\"\n            handleThemeChange(nextTheme)\n          }}\n        >\n          <SegmentedControlList\n            className=\"border-border bg-background w-fit rounded-full border shadow-xs\"\n            floatingBgClassName=\"rounded-full border border-border bg-background shadow-2xs dark:bg-secondary\"\n          >\n            {themes.map(([key, Icon]) => {\n              if (key === \"system\") return null\n\n              return (\n                <SegmentedControlTrigger\n                  key={key}\n                  value={key}\n                  className=\"data-[state=inactive]:text-muted-foreground size-6 data-[state=inactive]:opacity-60\"\n                >\n                  <Icon className=\"size-3.5 shrink-0\" />\n                </SegmentedControlTrigger>\n              )\n            })}\n          </SegmentedControlList>\n        </SegmentedControl>\n      </div>\n    )\n  }\n\n  // Full toggle with system option\n  const value = localValue ?? (mounted ? theme : \"system\")\n\n  return (\n    <div className={cn(\"w-fit\", className)} {...props}>\n      <SegmentedControl\n        value={value}\n        className=\"bg-background p-px\"\n        onValueChange={handleThemeChange}\n        defaultValue=\"system\"\n      >\n        <SegmentedControlList\n          className=\"border-border bg-background w-fit rounded-full border shadow-xs\"\n          floatingBgClassName=\"rounded-full border border-border bg-background shadow-2xs dark:bg-secondary\"\n        >\n          {themes.map(([key, Icon]) => (\n            <SegmentedControlTrigger\n              key={key}\n              value={key}\n              className=\"data-[state=inactive]:text-muted-foreground size-6 data-[state=inactive]:opacity-60\"\n            >\n              <Icon className=\"size-4 shrink-0\" />\n            </SegmentedControlTrigger>\n          ))}\n        </SegmentedControlList>\n      </SegmentedControl>\n    </div>\n  )\n}\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "primitives"
  ],
  "tier": "free",
  "readiness": "production"
}