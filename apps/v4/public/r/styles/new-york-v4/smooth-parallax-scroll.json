{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "smooth-parallax-scroll",
  "type": "registry:ui",
  "description": "Animation component: smooth parallax scroll",
  "files": [
    {
      "path": "registry/new-york-v4/animations/smooth-parallax-scroll/smooth-parallax-scroll.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport React, { memo, useEffect, useRef, useState } from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport type SmoothParallaxScrollProps = {\n  /** Content to wrap with smooth scrolling */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Interpolation speed (0-1). Lower = smoother but slower. Default: 0.08 */\n  speed?: number\n  /** Disable smooth scroll on mobile for better native performance. Default: true */\n  disableOnMobile?: boolean\n}\n\n/**\n * Smooth scroll container with parallax elements support.\n * Creates a buttery smooth scrolling experience with customizable speed.\n * Combine with ParallaxElement for individual element parallax effects.\n *\n * Note: This wraps your entire scrollable content and overrides native scroll behavior.\n * Consider performance implications for very long pages.\n */\nexport const SmoothParallaxScroll = memo<SmoothParallaxScrollProps>(\n  ({ children, className, speed = 0.08, disableOnMobile = true }) => {\n    const isMobile = useIsMobile()\n    const containerRef = useRef<HTMLDivElement>(null)\n    const scrollRef = useRef<HTMLDivElement>(null)\n    const currentScrollY = useRef(0)\n    const targetScrollY = useRef(0)\n    const [scrollProgress, setScrollProgress] = useState(0)\n\n    const shouldDisable = disableOnMobile && isMobile\n\n    useEffect(() => {\n      if (shouldDisable) return\n\n      const container = containerRef.current\n      const scrollContent = scrollRef.current\n      if (!container || !scrollContent) return\n\n      let animationFrame: number\n      const maxScroll = scrollContent.offsetHeight - window.innerHeight\n\n      const handleWheel = (e: WheelEvent) => {\n        e.preventDefault()\n        targetScrollY.current += e.deltaY\n        targetScrollY.current = Math.max(\n          0,\n          Math.min(targetScrollY.current, maxScroll)\n        )\n      }\n\n      const smoothScroll = () => {\n        currentScrollY.current +=\n          (targetScrollY.current - currentScrollY.current) * speed\n\n        if (Math.abs(targetScrollY.current - currentScrollY.current) < 0.5) {\n          currentScrollY.current = targetScrollY.current\n        }\n\n        scrollContent.style.transform = `translateY(-${currentScrollY.current}px)`\n\n        // Update scroll progress for child parallax elements\n        const progress = maxScroll > 0 ? currentScrollY.current / maxScroll : 0\n        setScrollProgress(progress)\n\n        animationFrame = requestAnimationFrame(smoothScroll)\n      }\n\n      container.addEventListener(\"wheel\", handleWheel, { passive: false })\n      smoothScroll()\n\n      return () => {\n        container.removeEventListener(\"wheel\", handleWheel)\n        cancelAnimationFrame(animationFrame)\n      }\n    }, [speed, shouldDisable])\n\n    if (shouldDisable) {\n      return (\n        <ScrollProgressContext.Provider value={scrollProgress}>\n          <div className={className}>{children}</div>\n        </ScrollProgressContext.Provider>\n      )\n    }\n\n    return (\n      <ScrollProgressContext.Provider value={scrollProgress}>\n        <div\n          ref={containerRef}\n          className={cn(\"fixed inset-0 overflow-hidden\", className)}\n        >\n          <div ref={scrollRef} className=\"will-change-transform\">\n            {children}\n          </div>\n        </div>\n      </ScrollProgressContext.Provider>\n    )\n  }\n)\n\nSmoothParallaxScroll.displayName = \"SmoothParallaxScroll\"\n\n// Context for sharing scroll progress with child elements\nconst ScrollProgressContext = React.createContext(0)\n\nexport type ParallaxElementProps = {\n  /** Content to apply parallax effect to */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Parallax speed multiplier. Default: 0.5 */\n  speed?: number\n  /** Starting offset percentage (0-1). Default: 0.5 */\n  startPosition?: number\n}\n\n/**\n * Element that moves at different speed than scroll within SmoothParallaxScroll.\n * Must be used inside SmoothParallaxScroll component.\n * Creates depth by moving elements at varying speeds.\n */\nexport const ParallaxElement = memo<ParallaxElementProps>(\n  ({ children, className, speed = 0.5, startPosition = 0.5 }) => {\n    const scrollProgress = React.useContext(ScrollProgressContext)\n    const elementRef = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n      const element = elementRef.current\n      if (!element) return\n\n      const viewportHeight = window.innerHeight\n      const offset = (scrollProgress - startPosition) * viewportHeight * speed\n      element.style.transform = `translateY(${offset}px)`\n    }, [scrollProgress, speed, startPosition])\n\n    return (\n      <div ref={elementRef} className={cn(\"will-change-transform\", className)}>\n        {children}\n      </div>\n    )\n  }\n)\n\nParallaxElement.displayName = \"ParallaxElement\"\n\nexport type LayeredParallaxProps = {\n  /** Array of layers with content and speed */\n  layers: Array<{\n    content: ReactNode\n    speed: number\n    className?: string\n  }>\n  /** Additional CSS classes */\n  className?: string\n}\n\n/**\n * Multiple parallax layers with different speeds.\n * Creates depth through motion by layering elements with varying parallax speeds.\n * Must be used inside SmoothParallaxScroll component.\n */\nexport const LayeredParallax = memo<LayeredParallaxProps>(\n  ({ layers, className }) => {\n    return (\n      <div className={cn(\"relative\", className)}>\n        {layers.map((layer, i) => (\n          <ParallaxElement\n            key={i}\n            speed={layer.speed}\n            className={cn(\"absolute inset-0\", layer.className)}\n          >\n            {layer.content}\n          </ParallaxElement>\n        ))}\n      </div>\n    )\n  }\n)\n\nLayeredParallax.displayName = \"LayeredParallax\"\n\nexport default SmoothParallaxScroll\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta",
  "poweredBy": [
    {
      "name": "Skiper UI",
      "url": "https://skiper-ui.com"
    }
  ]
}