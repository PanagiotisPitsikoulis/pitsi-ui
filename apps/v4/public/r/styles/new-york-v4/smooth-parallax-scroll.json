{
  "$schema": "https://pitsiui.com/schema/registry-item.json",
  "name": "smooth-parallax-scroll",
  "type": "registry:ui",
  "description": "Smooth parallax scrolling with GSAP ScrollTrigger.",
  "dependencies": [
    "gsap",
    "@gsap/react"
  ],
  "registryDependencies": [
    "utils",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/animations/smooth-parallax-scroll/smooth-parallax-scroll.tsx",
      "content": "\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { createContext, memo, useContext, useMemo, useRef } from \"react\"\nimport { motion, MotionValue, useScroll, useTransform } from \"motion/react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { useAnimationState } from \"@/hooks/use-animation-state\"\n\n// Context for scroll progress\nconst ScrollProgressContext = createContext<MotionValue<number> | null>(null)\n\nexport type SmoothParallaxContainerProps = {\n  /** Parallax layers */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Container height. Default: \"300vh\" */\n  height?: string\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Container for smooth parallax scroll effect.\n * Provides scroll progress to child SmoothParallaxLayer components.\n */\nexport const SmoothParallaxContainer = memo<SmoothParallaxContainerProps>(\n  ({\n    children,\n    className,\n    height = \"300vh\",\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const ref = useRef<HTMLDivElement>(null)\n    const { shouldUseScroll, shouldDisableAnimation } = useAnimationState(\n      scrollBased,\n      noMobile\n    )\n\n    const { scrollYProgress } = useScroll({\n      target: shouldUseScroll ? ref : undefined,\n      offset: [\"start start\", \"end end\"],\n    })\n\n    if (shouldDisableAnimation) {\n      return (\n        <div className={cn(\"relative\", className)} style={{ height }}>\n          <div className=\"sticky top-0 flex h-screen items-center justify-center overflow-hidden\">\n            {children}\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <ScrollProgressContext.Provider value={scrollYProgress}>\n        <div ref={ref} className={cn(\"relative\", className)} style={{ height }}>\n          <div className=\"sticky top-0 flex h-screen items-center justify-center overflow-hidden\">\n            {children}\n          </div>\n        </div>\n      </ScrollProgressContext.Provider>\n    )\n  }\n)\n\nSmoothParallaxContainer.displayName = \"SmoothParallaxContainer\"\n\nexport type SmoothParallaxLayerProps = {\n  /** Layer content */\n  children: ReactNode\n  /** Additional CSS classes */\n  className?: string\n  /** Y movement range in pixels. Default: [-200, 0] means moves up 200px */\n  yRange?: [number, number]\n  /** Scale range. Default: [1, 1] (no scale) */\n  scaleRange?: [number, number]\n  /** Opacity range. Default: [1, 1] (no opacity change) */\n  opacityRange?: number[]\n  /** Opacity input range. Default: [0, 1] */\n  opacityInputRange?: number[]\n  /** Z-index for layering. Default: 0 */\n  zIndex?: number\n  /** Enable scroll-based animation. Default: true */\n  scrollBased?: boolean\n  /** Disable animation on mobile. Default: false */\n  noMobile?: boolean\n}\n\n/**\n * Individual parallax layer with customizable movement.\n * Use inside SmoothParallaxContainer.\n */\nexport const SmoothParallaxLayer = memo<SmoothParallaxLayerProps>(\n  ({\n    children,\n    className,\n    yRange = [-200, 0],\n    scaleRange = [1, 1],\n    opacityRange = [1, 1],\n    opacityInputRange = [0, 1],\n    zIndex = 0,\n    scrollBased = true,\n    noMobile = false,\n  }) => {\n    const context = useContext(ScrollProgressContext)\n    const { shouldDisableAnimation } = useAnimationState(scrollBased, noMobile)\n\n    const y = useTransform(\n      context || new MotionValue(0),\n      [0, 1],\n      [0, yRange[0]]\n    )\n\n    const scale = useTransform(\n      context || new MotionValue(0),\n      [0, 0.5, 1],\n      [scaleRange[0], scaleRange[1], scaleRange[0]]\n    )\n\n    const opacity = useTransform(\n      context || new MotionValue(0),\n      opacityInputRange,\n      opacityRange\n    )\n\n    const hasScale = scaleRange[0] !== scaleRange[1]\n    const hasOpacity = opacityRange.some(\n      (v, i) => i > 0 && v !== opacityRange[0]\n    )\n\n    if (shouldDisableAnimation || !context) {\n      return (\n        <div className={className} style={{ zIndex }}>\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <motion.div\n        style={{\n          y,\n          ...(hasScale && { scale }),\n          ...(hasOpacity && { opacity }),\n          zIndex,\n        }}\n        className={cn(\"will-change-transform\", className)}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\n\nSmoothParallaxLayer.displayName = \"SmoothParallaxLayer\"\n\n// Legacy exports for backwards compatibility\nexport type SmoothParallaxScrollProps = {\n  children: ReactNode\n  className?: string\n  speed?: number\n  disableOnMobile?: boolean\n}\n\n/**\n * @deprecated Use SmoothParallaxContainer and SmoothParallaxLayer instead.\n */\nexport const SmoothParallaxScroll = memo<SmoothParallaxScrollProps>(\n  ({ children, className }) => {\n    return (\n      <SmoothParallaxContainer className={className} height=\"100%\">\n        {children}\n      </SmoothParallaxContainer>\n    )\n  }\n)\n\nSmoothParallaxScroll.displayName = \"SmoothParallaxScroll\"\n\nexport type ParallaxElementProps = {\n  children: ReactNode\n  className?: string\n  speed?: number\n  startPosition?: number\n}\n\n/**\n * @deprecated Use SmoothParallaxLayer instead.\n */\nexport const ParallaxElement = memo<ParallaxElementProps>(\n  ({ children, className, speed = 0.5 }) => {\n    return (\n      <SmoothParallaxLayer yRange={[speed * -400, 0]} className={className}>\n        {children}\n      </SmoothParallaxLayer>\n    )\n  }\n)\n\nParallaxElement.displayName = \"ParallaxElement\"\n\nexport default SmoothParallaxContainer\n",
      "type": "registry:ui"
    }
  ],
  "categories": [
    "animations"
  ],
  "tier": "free",
  "readiness": "beta",
  "poweredBy": [
    {
      "name": "Skiper UI",
      "url": "https://skiper-ui.com"
    }
  ]
}